var fn=Object.defineProperty;var un=(t,e,n)=>e in t?fn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Re=(t,e,n)=>(un(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function R(){}function Fe(t,e){for(const n in e)t[n]=e[n];return t}function Bt(t){return t()}function ze(){return Object.create(null)}function te(t){t.forEach(Bt)}function qe(t){return typeof t=="function"}function A(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function dn(t){return Object.keys(t).length===0}function Rt(t,...e){if(t==null){for(const r of e)r(void 0);return R}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Z(t,e,n){t.$$.on_destroy.push(Rt(e,n))}function be(t,e,n,r){if(t){const l=jt(t,e,n,r);return t[0](l)}}function jt(t,e,n,r){return t[1]&&r?Fe(n.ctx.slice(),t[1](r(e))):n.ctx}function he(t,e,n,r){if(t[2]&&r){const l=t[2](r(n));if(e.dirty===void 0)return l;if(typeof l=="object"){const o=[],s=Math.max(e.dirty.length,l.length);for(let a=0;a<s;a+=1)o[a]=e.dirty[a]|l[a];return o}return e.dirty|l}return e.dirty}function ge(t,e,n,r,l,o){if(l){const s=jt(e,n,r,o);t.p(s,l)}}function $e(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function p(t,e){t.appendChild(e)}function b(t,e,n){t.insertBefore(e,n||null)}function _(t){t.parentNode&&t.parentNode.removeChild(t)}function x(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function h(t){return document.createElement(t)}function I(t){return document.createTextNode(t)}function E(){return I(" ")}function K(){return I("")}function M(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function we(t){return function(e){return e.preventDefault(),t.call(this,e)}}function m(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function mn(t){return Array.from(t.childNodes)}function V(t,e){e=""+e,t.data!==e&&(t.data=e)}function pn(t,e){t.value=e??""}function Xe(t,e,n){for(let r=0;r<t.options.length;r+=1){const l=t.options[r];if(l.__value===e){l.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function _n(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function fe(t,e){return new t(e)}let _e;function pe(t){_e=t}function Ie(){if(!_e)throw new Error("Function called outside component initialization");return _e}function ye(t){Ie().$$.on_mount.push(t)}function bn(t){Ie().$$.after_update.push(t)}function hn(t){Ie().$$.on_destroy.push(t)}function gn(){const t=Ie();return(e,n,{cancelable:r=!1}={})=>{const l=t.$$.callbacks[e];if(l){const o=_n(e,n,{cancelable:r});return l.slice().forEach(s=>{s.call(t,o)}),!o.defaultPrevented}return!0}}function Ye(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const ae=[],Qe=[];let ce=[];const Ze=[],At=Promise.resolve();let Le=!1;function Lt(){Le||(Le=!0,At.then(Pt))}function Ue(){return Lt(),At}function Pe(t){ce.push(t)}const je=new Set;let se=0;function Pt(){if(se!==0)return;const t=_e;do{try{for(;se<ae.length;){const e=ae[se];se++,pe(e),$n(e.$$)}}catch(e){throw ae.length=0,se=0,e}for(pe(null),ae.length=0,se=0;Qe.length;)Qe.pop()();for(let e=0;e<ce.length;e+=1){const n=ce[e];je.has(n)||(je.add(n),n())}ce.length=0}while(ae.length);for(;Ze.length;)Ze.pop()();Le=!1,je.clear(),pe(t)}function $n(t){if(t.fragment!==null){t.update(),te(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Pe)}}function wn(t){const e=[],n=[];ce.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),ce=e}const Se=new Set;let re;function W(){re={r:0,c:[],p:re}}function H(){re.r||te(re.c),re=re.p}function $(t,e){t&&t.i&&(Se.delete(t),t.i(e))}function y(t,e,n,r){if(t&&t.o){if(Se.has(t))return;Se.add(t),re.c.push(()=>{Se.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function G(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ue(t,e){const n={},r={},l={$$scope:1};let o=t.length;for(;o--;){const s=t[o],a=e[o];if(a){for(const i in s)i in a||(r[i]=1);for(const i in a)l[i]||(n[i]=a[i],l[i]=1);t[o]=a}else for(const i in s)l[i]=1}for(const s in r)s in n||(n[s]=void 0);return n}function de(t){return typeof t=="object"&&t!==null?t:{}}function D(t){t&&t.c()}function S(t,e,n){const{fragment:r,after_update:l}=t.$$;r&&r.m(e,n),Pe(()=>{const o=t.$$.on_mount.map(Bt).filter(qe);t.$$.on_destroy?t.$$.on_destroy.push(...o):te(o),t.$$.on_mount=[]}),l.forEach(Pe)}function C(t,e){const n=t.$$;n.fragment!==null&&(wn(n.after_update),te(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function yn(t,e){t.$$.dirty[0]===-1&&(ae.push(t),Lt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function L(t,e,n,r,l,o,s=null,a=[-1]){const i=_e;pe(t);const c=t.$$={fragment:null,ctx:[],props:o,update:R,not_equal:l,bound:ze(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(i?i.$$.context:[])),callbacks:ze(),dirty:a,skip_bound:!1,root:e.target||i.$$.root};s&&s(c.root);let f=!1;if(c.ctx=n?n(t,e.props||{},(u,d,...g)=>{const w=g.length?g[0]:d;return c.ctx&&l(c.ctx[u],c.ctx[u]=w)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](w),f&&yn(t,u)),d}):[],c.update(),f=!0,te(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const u=mn(e.target);c.fragment&&c.fragment.l(u),u.forEach(_)}else c.fragment&&c.fragment.c();e.intro&&$(t.$$.fragment),S(t,e.target,e.anchor),Pt()}pe(i)}class P{constructor(){Re(this,"$$");Re(this,"$$set")}$destroy(){C(this,1),this.$destroy=R}$on(e,n){if(!qe(n))return R;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!dn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const kn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(kn);const ie=[];function Tt(t,e){return{subscribe:Oe(t,e).subscribe}}function Oe(t,e=R){let n;const r=new Set;function l(a){if(A(t,a)&&(t=a,n)){const i=!ie.length;for(const c of r)c[1](),ie.push(c,t);if(i){for(let c=0;c<ie.length;c+=2)ie[c][0](ie[c+1]);ie.length=0}}}function o(a){l(a(t))}function s(a,i=R){const c=[a,i];return r.add(c),r.size===1&&(n=e(l,o)||R),a(t),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:l,update:o,subscribe:s}}function Mt(t,e,n){const r=!Array.isArray(t),l=r?[t]:t;if(!l.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=e.length<2;return Tt(n,(s,a)=>{let i=!1;const c=[];let f=0,u=R;const d=()=>{if(f)return;u();const w=e(r?c[0]:c,s,a);o?s(w):u=qe(w)?w:R},g=l.map((w,F)=>Rt(w,j=>{c[F]=j,f&=~(1<<F),i&&d()},()=>{f|=1<<F}));return i=!0,d(),function(){te(g),u(),i=!1}})}function vn(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,l,o,s=[],a="",i=t.split("/");for(i[0]||i.shift();l=i.shift();)n=l[0],n==="*"?(s.push("wild"),a+="/(.*)"):n===":"?(r=l.indexOf("?",1),o=l.indexOf(".",1),s.push(l.substring(1,~r?r:~o?o:l.length)),a+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(a+=(~r?"?":"")+"\\"+l.substring(o))):a+="/"+l;return{keys:s,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}function En(t){let e,n,r;const l=[t[2]];var o=t[0];function s(a,i){let c={};if(i!==void 0&&i&4)c=ue(l,[de(a[2])]);else for(let f=0;f<l.length;f+=1)c=Fe(c,l[f]);return{props:c}}return o&&(e=fe(o,s(t)),e.$on("routeEvent",t[7])),{c(){e&&D(e.$$.fragment),n=K()},m(a,i){e&&S(e,a,i),b(a,n,i),r=!0},p(a,i){if(i&1&&o!==(o=a[0])){if(e){W();const c=e;y(c.$$.fragment,1,0,()=>{C(c,1)}),H()}o?(e=fe(o,s(a,i)),e.$on("routeEvent",a[7]),D(e.$$.fragment),$(e.$$.fragment,1),S(e,n.parentNode,n)):e=null}else if(o){const c=i&4?ue(l,[de(a[2])]):{};e.$set(c)}},i(a){r||(e&&$(e.$$.fragment,a),r=!0)},o(a){e&&y(e.$$.fragment,a),r=!1},d(a){a&&_(n),e&&C(e,a)}}}function Sn(t){let e,n,r;const l=[{params:t[1]},t[2]];var o=t[0];function s(a,i){let c={};if(i!==void 0&&i&6)c=ue(l,[i&2&&{params:a[1]},i&4&&de(a[2])]);else for(let f=0;f<l.length;f+=1)c=Fe(c,l[f]);return{props:c}}return o&&(e=fe(o,s(t)),e.$on("routeEvent",t[6])),{c(){e&&D(e.$$.fragment),n=K()},m(a,i){e&&S(e,a,i),b(a,n,i),r=!0},p(a,i){if(i&1&&o!==(o=a[0])){if(e){W();const c=e;y(c.$$.fragment,1,0,()=>{C(c,1)}),H()}o?(e=fe(o,s(a,i)),e.$on("routeEvent",a[6]),D(e.$$.fragment),$(e.$$.fragment,1),S(e,n.parentNode,n)):e=null}else if(o){const c=i&6?ue(l,[i&2&&{params:a[1]},i&4&&de(a[2])]):{};e.$set(c)}},i(a){r||(e&&$(e.$$.fragment,a),r=!0)},o(a){e&&y(e.$$.fragment,a),r=!1},d(a){a&&_(n),e&&C(e,a)}}}function Cn(t){let e,n,r,l;const o=[Sn,En],s=[];function a(i,c){return i[1]?0:1}return e=a(t),n=s[e]=o[e](t),{c(){n.c(),r=K()},m(i,c){s[e].m(i,c),b(i,r,c),l=!0},p(i,[c]){let f=e;e=a(i),e===f?s[e].p(i,c):(W(),y(s[f],1,1,()=>{s[f]=null}),H(),n=s[e],n?n.p(i,c):(n=s[e]=o[e](i),n.c()),$(n,1),n.m(r.parentNode,r))},i(i){l||($(n),l=!0)},o(i){y(n),l=!1},d(i){i&&_(r),s[e].d(i)}}}function xe(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let r="";return n>-1&&(r=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:r}}const Ge=Tt(null,function(e){e(xe());const n=()=>{e(xe())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}}),Vt=Mt(Ge,t=>t.location);Mt(Ge,t=>t.querystring);const et=Oe(void 0);async function Q(t){if(!t||t.length<1||t.charAt(0)!="/"&&t.indexOf("#/")!==0)throw Error("Invalid parameter location");await Ue(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=(t.charAt(0)=="#"?"":"#")+t}async function Dn(t){if(!t||t.length<1||t.charAt(0)!="/"&&t.indexOf("#/")!==0)throw Error("Invalid parameter location");await Ue();const e=(t.charAt(0)=="#"?"":"#")+t;try{const n={...history.state};delete n.__svelte_spa_router_scrollX,delete n.__svelte_spa_router_scrollY,window.history.replaceState(n,void 0,e)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function Fn(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function qn(t,e,n){let{routes:r={}}=e,{prefix:l=""}=e,{restoreScrollState:o=!1}=e;class s{constructor(q,v){if(!v||typeof v!="function"&&(typeof v!="object"||v._sveltesparouter!==!0))throw Error("Invalid component object");if(!q||typeof q=="string"&&(q.length<1||q.charAt(0)!="/"&&q.charAt(0)!="*")||typeof q=="object"&&!(q instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:O,keys:U}=vn(q);this.path=q,typeof v=="object"&&v._sveltesparouter===!0?(this.component=v.component,this.conditions=v.conditions||[],this.userData=v.userData,this.props=v.props||{}):(this.component=()=>Promise.resolve(v),this.conditions=[],this.props={}),this._pattern=O,this._keys=U}match(q){if(l){if(typeof l=="string")if(q.startsWith(l))q=q.substr(l.length)||"/";else return null;else if(l instanceof RegExp){const ee=q.match(l);if(ee&&ee[0])q=q.substr(ee[0].length)||"/";else return null}}const v=this._pattern.exec(q);if(v===null)return null;if(this._keys===!1)return v;const O={};let U=0;for(;U<this._keys.length;){try{O[this._keys[U]]=decodeURIComponent(v[U+1]||"")||null}catch{O[this._keys[U]]=null}U++}return O}async checkConditions(q){for(let v=0;v<this.conditions.length;v++)if(!await this.conditions[v](q))return!1;return!0}}const a=[];r instanceof Map?r.forEach((k,q)=>{a.push(new s(q,k))}):Object.keys(r).forEach(k=>{a.push(new s(k,r[k]))});let i=null,c=null,f={};const u=gn();async function d(k,q){await Ue(),u(k,q)}let g=null,w=null;o&&(w=k=>{k.state&&(k.state.__svelte_spa_router_scrollY||k.state.__svelte_spa_router_scrollX)?g=k.state:g=null},window.addEventListener("popstate",w),bn(()=>{Fn(g)}));let F=null,j=null;const N=Ge.subscribe(async k=>{F=k;let q=0;for(;q<a.length;){const v=a[q].match(k.location);if(!v){q++;continue}const O={route:a[q].path,location:k.location,querystring:k.querystring,userData:a[q].userData,params:v&&typeof v=="object"&&Object.keys(v).length?v:null};if(!await a[q].checkConditions(O)){n(0,i=null),j=null,d("conditionsFailed",O);return}d("routeLoading",Object.assign({},O));const U=a[q].component;if(j!=U){U.loading?(n(0,i=U.loading),j=U,n(1,c=U.loadingParams),n(2,f={}),d("routeLoaded",Object.assign({},O,{component:i,name:i.name,params:c}))):(n(0,i=null),j=null);const ee=await U();if(k!=F)return;n(0,i=ee&&ee.default||ee),j=U}v&&typeof v=="object"&&Object.keys(v).length?n(1,c=v):n(1,c=null),n(2,f=a[q].props),d("routeLoaded",Object.assign({},O,{component:i,name:i.name,params:c})).then(()=>{et.set(c)});return}n(0,i=null),j=null,et.set(void 0)});hn(()=>{N(),w&&window.removeEventListener("popstate",w)});function B(k){Ye.call(this,t,k)}function T(k){Ye.call(this,t,k)}return t.$$set=k=>{"routes"in k&&n(3,r=k.routes),"prefix"in k&&n(4,l=k.prefix),"restoreScrollState"in k&&n(5,o=k.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=o?"manual":"auto")},[i,c,f,r,l,o,B,T]}class In extends P{constructor(e){super(),L(this,e,qn,Cn,A,{routes:3,prefix:4,restoreScrollState:5})}}const Te=t=>btoa(String.fromCharCode(...new Uint8Array(t))),Me=t=>Uint8Array.from(atob(t),e=>e.charCodeAt(0)).buffer,Ae=t=>typeof t>"u"?"":t,X=t=>t instanceof Error?t.message:JSON.stringify(t),On=(t,e)=>{const n=localStorage.getItem(t);if(n){const o=Me(n);return new Uint8Array(o)}const r=crypto.getRandomValues(new Uint8Array(e)),l=Te(r.buffer);return localStorage.setItem(t,l),r},Ut=()=>On("salt",12),Nn=()=>crypto.getRandomValues(new Uint8Array(12)),Gt=async(t,e)=>{const n=await crypto.subtle.importKey("raw",new TextEncoder().encode(t),"PBKDF2",!1,["deriveKey"]);return await crypto.subtle.deriveKey({name:"PBKDF2",salt:e,iterations:25e4,hash:"SHA-256"},n,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])},Bn=async(t,e,n)=>await crypto.subtle.encrypt({name:"AES-GCM",iv:e},t,new TextEncoder().encode(n)),Rn=async(t,e,n)=>{const r=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:e},t,n);return new TextDecoder().decode(r)},jn=async(t,e)=>{const n=Nn(),r=await Gt(e,Ut()),l=await Bn(r,n,t),o=Te(l);return Te(n.buffer)+"#"+o},An=async(t,e)=>{const[n,r]=t.split("#"),l=Me(n),o=Me(r),s=new Uint8Array(l),a=await Gt(e,Ut());return await Rn(a,s,o)},Ve={owner:"",name:"",branch:"main",prefix:"",token:""},Ke="github-repo",tt=async t=>{const e=localStorage.getItem(Ke);if(!e){if(t)throw new Error("Github repository data not found!");return Ve}let n=JSON.parse(e);return n.token=t?await An(n.token,t):"",n},Ln=async(t,e)=>{const n={owner:t.owner,name:t.name,branch:t.branch,prefix:t.prefix,token:await jn(t.token,e)};return localStorage.setItem(Ke,JSON.stringify(n)),t},Pn=()=>{localStorage.removeItem(Ke)},Tn=()=>{const t=Oe(Ve);return{subscribe:t.subscribe,initRepoConfig:async()=>{t.set(await tt())},login:async e=>{t.set(await tt(e))},logout:()=>{t.update(e=>(e.token="",e))},saveRepoConfig:async(e,n)=>{e=await Ln(e,n),t.set(e)},reset:()=>{Pn(),t.set(Ve)}}},z=Tn(),Ce=(t,e,n)=>{const r=t.get(e);if(!r)throw new Error(n);return r},ne=t=>{if(t===null||typeof t!="string")throw Error(`Invalid value: ${t}`);return t.trim()},Mn=t=>e=>{if(!e)return t.message||"Please enter a value!"},Vn=t=>{var n;if(typeof((n=t.props)==null?void 0:n.min)!="number")throw new Error('Validator: "min" required numeric property!');const e=t.props.min;return r=>{if(r!==""&&r.length<e)return t.message||`The minumum length is: ${e}`}},Un=t=>{var n;if(typeof((n=t.props)==null?void 0:n.max)!="number")throw new Error('Validator: "max" required numeric property!');const e=t.props.max;return r=>{if(r!==""&&r.length>e)return t.message||`The maximum length is: ${e}`}},Gn=t=>{if(!t.props||!t.props.regex)throw new Error('Validator: "validateRegex" requires a "regex" property!');const e=new RegExp(t.props.regex);return n=>{if(n!==""&&!e.test(n))return t.message||`Value does not match ${e}`}},Kn=t=>{if(!t.props||!t.props.field)throw new Error('Validator: "fieldEquals" requires a "field" and a "msg" property!');const e=t.props.field;return(n,r)=>{if(n!==r.get(e))return t.message||`Value does not match field: ${e}`}},Jn={required:Mn,min:Vn,max:Un,regex:Gn,fieldEquals:Kn},ke=t=>{let e=new Map,n=new Map;const r=(s,a,i)=>{n.set(a,"");for(const c of i){console.log("field",a,c);const f=c(s.get(a),s);if(f)return n.set(a,f),console.log("Form Error:",f),!1}return!0},l=s=>{let a=!0;return e.forEach((i,c)=>{r(s,c,i)||(a=!1)}),a},o=s=>(s.forEach(a=>{const i=[];a.validators.forEach(c=>{i.push(Jn[c.validator](c))}),e.set(a.id,i)}),s);return t&&o(t),{formErrors:n,formValidate:l,formFieldsUpdate:o}},Kt=(t,e,n)=>{for(const r of t)if(n[r.id]!==e.get(r.id))return!0;return!1};function Wn(t){let e,n,r,l,o;const s=t[2].default,a=be(s,t,t[1],null);return{c(){e=h("div"),n=h("h3"),r=I(t[0]),l=E(),a&&a.c(),m(n,"class","text-lg pb-2 my-6 border-b"),m(e,"class","bg-white p-6 rounded-md shadow")},m(i,c){b(i,e,c),p(e,n),p(n,r),p(e,l),a&&a.m(e,null),o=!0},p(i,[c]){(!o||c&1)&&V(r,i[0]),a&&a.p&&(!o||c&2)&&ge(a,s,i,i[1],o?he(s,i[1],c,null):$e(i[1]),null)},i(i){o||($(a,i),o=!0)},o(i){y(a,i),o=!1},d(i){i&&_(e),a&&a.d(i)}}}function Hn(t,e,n){let{$$slots:r={},$$scope:l}=e,{label:o}=e;return t.$$set=s=>{"label"in s&&n(0,o=s.label),"$$scope"in s&&n(1,l=s.$$scope)},[o,l,r]}class me extends P{constructor(e){super(),L(this,e,Hn,Wn,A,{label:0})}}function nt(t){let e,n;return{c(){e=h("p"),n=I(t[2]),m(e,"class","text-xs text-red-600 pt-2")},m(r,l){b(r,e,l),p(e,n)},p(r,l){l&4&&V(n,r[2])},d(r){r&&_(e)}}}function zn(t){let e,n,r,l,o,s;const a=t[4].default,i=be(a,t,t[3],null);let c=t[2]&&nt(t);return{c(){e=h("div"),n=h("label"),r=I(t[1]),l=E(),i&&i.c(),o=E(),c&&c.c(),m(n,"for",t[0]),m(n,"class","block text-gray-700 text-sm font-bold mb-2")},m(f,u){b(f,e,u),p(e,n),p(n,r),p(e,l),i&&i.m(e,null),p(e,o),c&&c.m(e,null),s=!0},p(f,[u]){(!s||u&2)&&V(r,f[1]),(!s||u&1)&&m(n,"for",f[0]),i&&i.p&&(!s||u&8)&&ge(i,a,f,f[3],s?he(a,f[3],u,null):$e(f[3]),null),f[2]?c?c.p(f,u):(c=nt(f),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(f){s||($(i,f),s=!0)},o(f){y(i,f),s=!1},d(f){f&&_(e),i&&i.d(f),c&&c.d()}}}function Xn(t,e,n){let{$$slots:r={},$$scope:l}=e,{id:o}=e,{label:s}=e,{error:a}=e;return t.$$set=i=>{"id"in i&&n(0,o=i.id),"label"in i&&n(1,s=i.label),"error"in i&&n(2,a=i.error),"$$scope"in i&&n(3,l=i.$$scope)},[o,s,a,l,r]}class ve extends P{constructor(e){super(),L(this,e,Xn,zn,A,{id:0,label:1,error:2})}}function Yn(t){let e,n,r;return{c(){e=h("textarea"),m(e,"id",t[1]),m(e,"name",t[1]),m(e,"class","input-base"),e.value=t[3],e.disabled=t[4]},m(l,o){b(l,e,o),n||(r=M(e,"blur",t[5]),n=!0)},p(l,o){o&2&&m(e,"id",l[1]),o&2&&m(e,"name",l[1]),o&8&&(e.value=l[3]),o&16&&(e.disabled=l[4])},d(l){l&&_(e),n=!1,r()}}}function Qn(t){let e,n;return e=new ve({props:{id:t[1],label:t[2],error:t[0],$$slots:{default:[Yn]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},m(r,l){S(e,r,l),n=!0},p(r,[l]){const o={};l&2&&(o.id=r[1]),l&4&&(o.label=r[2]),l&1&&(o.error=r[0]),l&90&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){y(e.$$.fragment,r),n=!1},d(r){C(e,r)}}}function Zn(t,e,n){let{id:r}=e,{label:l}=e,{value:o}=e,{error:s}=e,{disabled:a=!1}=e;const i=()=>{s&&n(0,s="")};return t.$$set=c=>{"id"in c&&n(1,r=c.id),"label"in c&&n(2,l=c.label),"value"in c&&n(3,o=c.value),"error"in c&&n(0,s=c.error),"disabled"in c&&n(4,a=c.disabled)},[s,r,l,o,a,i]}class xn extends P{constructor(e){super(),L(this,e,Zn,Qn,A,{id:1,label:2,value:3,error:0,disabled:4})}}function er(t){let e,n,r,l;return{c(){e=h("input"),m(e,"id",t[1]),m(e,"name",t[1]),m(e,"class","checkbox-base"),m(e,"type","checkbox"),e.disabled=t[4],e.checked=n=!!t[3]},m(o,s){b(o,e,s),r||(l=M(e,"blur",t[5]),r=!0)},p(o,s){s&2&&m(e,"id",o[1]),s&2&&m(e,"name",o[1]),s&16&&(e.disabled=o[4]),s&8&&n!==(n=!!o[3])&&(e.checked=n)},d(o){o&&_(e),r=!1,l()}}}function tr(t){let e,n;return e=new ve({props:{id:t[1],label:t[2],error:t[0],$$slots:{default:[er]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},m(r,l){S(e,r,l),n=!0},p(r,[l]){const o={};l&2&&(o.id=r[1]),l&4&&(o.label=r[2]),l&1&&(o.error=r[0]),l&90&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){y(e.$$.fragment,r),n=!1},d(r){C(e,r)}}}function nr(t,e,n){let{id:r}=e,{label:l}=e,{value:o}=e,{error:s}=e,{disabled:a=!1}=e;const i=()=>{s&&n(0,s="")};return t.$$set=c=>{"id"in c&&n(1,r=c.id),"label"in c&&n(2,l=c.label),"value"in c&&n(3,o=c.value),"error"in c&&n(0,s=c.error),"disabled"in c&&n(4,a=c.disabled)},[s,r,l,o,a,i]}class rr extends P{constructor(e){super(),L(this,e,nr,tr,A,{id:1,label:2,value:3,error:0,disabled:4})}}function lr(t){let e,n,r;return{c(){e=h("input"),m(e,"id",t[1]),m(e,"name",t[1]),m(e,"class","input-base"),m(e,"type","password"),e.value=t[3],e.disabled=t[4]},m(l,o){b(l,e,o),n||(r=M(e,"blur",t[5]),n=!0)},p(l,o){o&2&&m(e,"id",l[1]),o&2&&m(e,"name",l[1]),o&8&&e.value!==l[3]&&(e.value=l[3]),o&16&&(e.disabled=l[4])},d(l){l&&_(e),n=!1,r()}}}function or(t){let e,n;return e=new ve({props:{id:t[1],label:t[2],error:t[0],$$slots:{default:[lr]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},m(r,l){S(e,r,l),n=!0},p(r,[l]){const o={};l&2&&(o.id=r[1]),l&4&&(o.label=r[2]),l&1&&(o.error=r[0]),l&90&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){y(e.$$.fragment,r),n=!1},d(r){C(e,r)}}}function sr(t,e,n){let{id:r}=e,{label:l}=e,{value:o}=e,{error:s}=e,{disabled:a=!1}=e;const i=()=>{s&&n(0,s="")};return t.$$set=c=>{"id"in c&&n(1,r=c.id),"label"in c&&n(2,l=c.label),"value"in c&&n(3,o=c.value),"error"in c&&n(0,s=c.error),"disabled"in c&&n(4,a=c.disabled)},[s,r,l,o,a,i]}class ir extends P{constructor(e){super(),L(this,e,sr,or,A,{id:1,label:2,value:3,error:0,disabled:4})}}function rt(t,e,n){const r=t.slice();return r[8]=e[n],r}function lt(t){let e,n=t[8]+"",r,l;return{c(){e=h("option"),r=I(n),e.__value=t[8],pn(e,e.__value),e.selected=l=t[8]===t[3]},m(o,s){b(o,e,s),p(e,r)},p(o,s){s&40&&l!==(l=o[8]===o[3])&&(e.selected=l)},d(o){o&&_(e)}}}function ar(t){let e,n,r,l=G(t[5]),o=[];for(let s=0;s<l.length;s+=1)o[s]=lt(rt(t,l,s));return{c(){e=h("select");for(let s=0;s<o.length;s+=1)o[s].c();m(e,"id",t[1]),m(e,"name",t[1]),m(e,"class","input-base"),e.disabled=t[4]},m(s,a){b(s,e,a);for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(e,null);Xe(e,t[3]),n||(r=M(e,"blur",t[6]),n=!0)},p(s,a){if(a&40){l=G(s[5]);let i;for(i=0;i<l.length;i+=1){const c=rt(s,l,i);o[i]?o[i].p(c,a):(o[i]=lt(c),o[i].c(),o[i].m(e,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=l.length}a&2&&m(e,"id",s[1]),a&2&&m(e,"name",s[1]),a&40&&Xe(e,s[3]),a&16&&(e.disabled=s[4])},d(s){s&&_(e),x(o,s),n=!1,r()}}}function cr(t){let e,n;return e=new ve({props:{id:t[1],label:t[2],error:t[0],$$slots:{default:[ar]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},m(r,l){S(e,r,l),n=!0},p(r,[l]){const o={};l&2&&(o.id=r[1]),l&4&&(o.label=r[2]),l&1&&(o.error=r[0]),l&2074&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){y(e.$$.fragment,r),n=!1},d(r){C(e,r)}}}function fr(t,e,n){let{id:r}=e,{label:l}=e,{value:o}=e,{props:s}=e,{error:a}=e,{disabled:i=!1}=e,c=s.options.split(",").map(u=>u.trim());const f=()=>{a&&n(0,a="")};return t.$$set=u=>{"id"in u&&n(1,r=u.id),"label"in u&&n(2,l=u.label),"value"in u&&n(3,o=u.value),"props"in u&&n(7,s=u.props),"error"in u&&n(0,a=u.error),"disabled"in u&&n(4,i=u.disabled)},[a,r,l,o,i,c,f,s]}class ur extends P{constructor(e){super(),L(this,e,fr,cr,A,{id:1,label:2,value:3,props:7,error:0,disabled:4})}}function dr(t){let e,n,r;return{c(){e=h("input"),m(e,"id",t[1]),m(e,"name",t[1]),m(e,"class","input-base"),m(e,"type","text"),e.value=t[3],e.disabled=t[4]},m(l,o){b(l,e,o),n||(r=M(e,"blur",t[5]),n=!0)},p(l,o){o&2&&m(e,"id",l[1]),o&2&&m(e,"name",l[1]),o&8&&e.value!==l[3]&&(e.value=l[3]),o&16&&(e.disabled=l[4])},d(l){l&&_(e),n=!1,r()}}}function mr(t){let e,n;return e=new ve({props:{id:t[1],label:t[2],error:t[0],$$slots:{default:[dr]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},m(r,l){S(e,r,l),n=!0},p(r,[l]){const o={};l&2&&(o.id=r[1]),l&4&&(o.label=r[2]),l&1&&(o.error=r[0]),l&90&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){y(e.$$.fragment,r),n=!1},d(r){C(e,r)}}}function pr(t,e,n){let{id:r}=e,{label:l}=e,{value:o}=e,{error:s}=e,{disabled:a=!1}=e;const i=()=>{s&&n(0,s="")};return t.$$set=c=>{"id"in c&&n(1,r=c.id),"label"in c&&n(2,l=c.label),"value"in c&&n(3,o=c.value),"error"in c&&n(0,s=c.error),"disabled"in c&&n(4,a=c.disabled)},[s,r,l,o,a,i]}class _r extends P{constructor(e){super(),L(this,e,pr,mr,A,{id:1,label:2,value:3,error:0,disabled:4})}}const br={text:{component:_r,validators:["required","min","max","regex"],hasProps:!1},password:{component:ir,validators:["required","min","max","regex"],hasProps:!1},area:{component:xn,validators:["required","min","max","regex"],hasProps:!1},checkbox:{component:rr,validators:[],hasProps:!1},selectbox:{component:ur,validators:["required"],hasProps:!0}};function hr(t){let e,n,r;const l=[{id:t[0].id},{label:t[0].label},{value:Ae(t[1][t[0].id])},t[5],{error:t[2].get(t[0].id)},{disabled:t[3]}];var o=t[4].component;function s(a,i){let c={};if(i!==void 0&&i&47)c=ue(l,[i&1&&{id:a[0].id},i&1&&{label:a[0].label},i&3&&{value:Ae(a[1][a[0].id])},i&32&&de(a[5]),i&5&&{error:a[2].get(a[0].id)},i&8&&{disabled:a[3]}]);else for(let f=0;f<l.length;f+=1)c=Fe(c,l[f]);return{props:c}}return o&&(e=fe(o,s(t))),{c(){e&&D(e.$$.fragment),n=K()},m(a,i){e&&S(e,a,i),b(a,n,i),r=!0},p(a,[i]){if(o!==(o=a[4].component)){if(e){W();const c=e;y(c.$$.fragment,1,0,()=>{C(c,1)}),H()}o?(e=fe(o,s(a,i)),D(e.$$.fragment),$(e.$$.fragment,1),S(e,n.parentNode,n)):e=null}else if(o){const c=i&47?ue(l,[i&1&&{id:a[0].id},i&1&&{label:a[0].label},i&3&&{value:Ae(a[1][a[0].id])},i&32&&de(a[5]),i&5&&{error:a[2].get(a[0].id)},i&8&&{disabled:a[3]}]):{};e.$set(c)}},i(a){r||(e&&$(e.$$.fragment,a),r=!0)},o(a){e&&y(e.$$.fragment,a),r=!1},d(a){a&&_(n),e&&C(e,a)}}}function gr(t,e,n){let{field:r}=e,{data:l}=e,{formErrors:o}=e,{disabled:s}=e;const a=br[r.component],i=a.hasProps?{props:r.props}:{};return t.$$set=c=>{"field"in c&&n(0,r=c.field),"data"in c&&n(1,l=c.data),"formErrors"in c&&n(2,o=c.formErrors),"disabled"in c&&n(3,s=c.disabled)},[r,l,o,s,a,i]}class $r extends P{constructor(e){super(),L(this,e,gr,hr,A,{field:0,data:1,formErrors:2,disabled:3})}}function ot(t,e,n){const r=t.slice();return r[4]=e[n],r}function st(t){let e,n;return e=new $r({props:{field:t[4],data:t[1],formErrors:t[2],disabled:t[3]}}),{c(){D(e.$$.fragment)},m(r,l){S(e,r,l),n=!0},p(r,l){const o={};l&1&&(o.field=r[4]),l&2&&(o.data=r[1]),l&4&&(o.formErrors=r[2]),l&8&&(o.disabled=r[3]),e.$set(o)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){y(e.$$.fragment,r),n=!1},d(r){C(e,r)}}}function wr(t){let e,n,r=G(t[0]),l=[];for(let s=0;s<r.length;s+=1)l[s]=st(ot(t,r,s));const o=s=>y(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=K()},m(s,a){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,a);b(s,e,a),n=!0},p(s,[a]){if(a&15){r=G(s[0]);let i;for(i=0;i<r.length;i+=1){const c=ot(s,r,i);l[i]?(l[i].p(c,a),$(l[i],1)):(l[i]=st(c),l[i].c(),$(l[i],1),l[i].m(e.parentNode,e))}for(W(),i=r.length;i<l.length;i+=1)o(i);H()}},i(s){if(!n){for(let a=0;a<r.length;a+=1)$(l[a]);n=!0}},o(s){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)y(l[a]);n=!1},d(s){s&&_(e),x(l,s)}}}function yr(t,e,n){let{fields:r}=e,{data:l}=e,{formErrors:o}=e,{disabled:s}=e;return t.$$set=a=>{"fields"in a&&n(0,r=a.fields),"data"in a&&n(1,l=a.data),"formErrors"in a&&n(2,o=a.formErrors),"disabled"in a&&n(3,s=a.disabled)},[r,l,o,s]}class Ee extends P{constructor(e){super(),L(this,e,yr,wr,A,{fields:0,data:1,formErrors:2,disabled:3})}}function kr(t){let e,n;const r=t[1].default,l=be(r,t,t[0],null);return{c(){e=h("div"),l&&l.c(),m(e,"class","flex gap-4")},m(o,s){b(o,e,s),l&&l.m(e,null),n=!0},p(o,[s]){l&&l.p&&(!n||s&1)&&ge(l,r,o,o[0],n?he(r,o[0],s,null):$e(o[0]),null)},i(o){n||($(l,o),n=!0)},o(o){y(l,o),n=!1},d(o){o&&_(e),l&&l.d(o)}}}function vr(t,e,n){let{$$slots:r={},$$scope:l}=e;return t.$$set=o=>{"$$scope"in o&&n(0,l=o.$$scope)},[l,r]}class Y extends P{constructor(e){super(),L(this,e,vr,kr,A,{})}}function Er(t){let e,n;const r=t[1].default,l=be(r,t,t[0],null);return{c(){e=h("div"),l&&l.c(),m(e,"class","flex flex-col gap-4")},m(o,s){b(o,e,s),l&&l.m(e,null),n=!0},p(o,[s]){l&&l.p&&(!n||s&1)&&ge(l,r,o,o[0],n?he(r,o[0],s,null):$e(o[0]),null)},i(o){n||($(l,o),n=!0)},o(o){y(l,o),n=!1},d(o){o&&_(e),l&&l.d(o)}}}function Sr(t,e,n){let{$$slots:r={},$$scope:l}=e;return t.$$set=o=>{"$$scope"in o&&n(0,l=o.$$scope)},[l,r]}class le extends P{constructor(e){super(),L(this,e,Sr,Er,A,{})}}const Cr=[{id:"password",component:"password",label:"Password",validators:[{validator:"required"}]}];function Dr(t){let e,n,r,l,o;return{c(){e=h("button"),e.textContent="Reset",n=E(),r=h("button"),r.textContent="Submit",m(e,"type","button"),m(e,"class","btn-base"),m(r,"class","btn-base"),m(r,"type","submit")},m(s,a){b(s,e,a),b(s,n,a),b(s,r,a),l||(o=M(e,"click",z.reset),l=!0)},p:R,d(s){s&&(_(e),_(n),_(r)),l=!1,o()}}}function Fr(t){let e,n,r,l;return e=new Ee({props:{fields:t[1],data:t[2],formErrors:t[0],disabled:!1}}),r=new Y({props:{$$slots:{default:[Dr]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment),n=E(),D(r.$$.fragment)},m(o,s){S(e,o,s),b(o,n,s),S(r,o,s),l=!0},p(o,s){const a={};s&1&&(a.formErrors=o[0]),e.$set(a);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),r.$set(i)},i(o){l||($(e.$$.fragment,o),$(r.$$.fragment,o),l=!0)},o(o){y(e.$$.fragment,o),y(r.$$.fragment,o),l=!1},d(o){o&&_(n),C(e,o),C(r,o)}}}function qr(t){let e,n,r,l,o;return n=new le({props:{$$slots:{default:[Fr]},$$scope:{ctx:t}}}),{c(){e=h("form"),D(n.$$.fragment)},m(s,a){b(s,e,a),S(n,e,null),r=!0,l||(o=M(e,"submit",we(t[3])),l=!0)},p(s,a){const i={};a&33&&(i.$$scope={dirty:a,ctx:s}),n.$set(i)},i(s){r||($(n.$$.fragment,s),r=!0)},o(s){y(n.$$.fragment,s),r=!1},d(s){s&&_(e),C(n),l=!1,o()}}}function Ir(t){let e,n,r;return n=new me({props:{label:"Login",$$slots:{default:[qr]},$$scope:{ctx:t}}}),{c(){e=h("div"),D(n.$$.fragment),m(e,"class","w-full max-w-xs m-auto")},m(l,o){b(l,e,o),S(n,e,null),r=!0},p(l,[o]){const s={};o&33&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){r||($(n.$$.fragment,l),r=!0)},o(l){y(n.$$.fragment,l),r=!1},d(l){l&&_(e),C(n)}}}function Or(t,e,n){const r=Cr,l={password:""};let{formErrors:o,formValidate:s}=ke(r);return[o,r,l,async i=>{const c=new FormData(i.target);if(!s(c)){n(0,o);return}try{await z.login(ne(c.get("password")))}catch{n(0,o=o.set("password","Unable to login!"))}}]}class Nr extends P{constructor(e){super(),L(this,e,Or,Ir,A,{})}}const Je=t=>{const e={};return t.forEach(n=>e[n.id]=n.value),e},Br=[{id:"owner",label:"Repository Owner",component:"text",value:"",validators:[{validator:"required"}]},{id:"name",label:"Repository Name",component:"text",value:"",validators:[{validator:"required"}]},{id:"branch",label:"Branch",component:"text",value:"main",validators:[{validator:"required"}]},{id:"prefix",label:"Prefix",component:"text",value:"",validators:[]},{id:"token",label:"Token",component:"password",value:"",validators:[{validator:"required"}]},{id:"password",label:"Password",component:"password",value:"",validators:[{validator:"required"},{validator:"min",props:{min:5}},{validator:"max",props:{max:15}}]},{id:"confirm",label:"Confirm",component:"password",value:"",validators:[{validator:"required"},{validator:"fieldEquals",props:{field:"password",msg:"Password do not match!"}}]}];function Rr(t){let e;return{c(){e=h("button"),e.textContent="Submit",m(e,"class","btn-base"),m(e,"type","submit")},m(n,r){b(n,e,r)},p:R,d(n){n&&_(e)}}}function jr(t){let e,n,r,l;return e=new Ee({props:{fields:t[1],data:t[2],formErrors:t[0],disabled:!1}}),r=new Y({props:{$$slots:{default:[Rr]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment),n=E(),D(r.$$.fragment)},m(o,s){S(e,o,s),b(o,n,s),S(r,o,s),l=!0},p(o,s){const a={};s&1&&(a.formErrors=o[0]),e.$set(a);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),r.$set(i)},i(o){l||($(e.$$.fragment,o),$(r.$$.fragment,o),l=!0)},o(o){y(e.$$.fragment,o),y(r.$$.fragment,o),l=!1},d(o){o&&_(n),C(e,o),C(r,o)}}}function Ar(t){let e,n,r,l,o;return n=new le({props:{$$slots:{default:[jr]},$$scope:{ctx:t}}}),{c(){e=h("form"),D(n.$$.fragment)},m(s,a){b(s,e,a),S(n,e,null),r=!0,l||(o=M(e,"submit",we(t[3])),l=!0)},p(s,a){const i={};a&33&&(i.$$scope={dirty:a,ctx:s}),n.$set(i)},i(s){r||($(n.$$.fragment,s),r=!0)},o(s){y(n.$$.fragment,s),r=!1},d(s){s&&_(e),C(n),l=!1,o()}}}function Lr(t){let e,n,r;return n=new me({props:{label:"Login",$$slots:{default:[Ar]},$$scope:{ctx:t}}}),{c(){e=h("div"),D(n.$$.fragment),m(e,"class","w-full max-w-xs m-auto")},m(l,o){b(l,e,o),S(n,e,null),r=!0},p(l,[o]){const s={};o&33&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){r||($(n.$$.fragment,l),r=!0)},o(l){y(n.$$.fragment,l),r=!1},d(l){l&&_(e),C(n)}}}function Pr(t,e,n){const r=Br,l=Je(r);let{formErrors:o,formValidate:s}=ke(r);return[o,r,l,i=>{const c=new FormData(i.target);if(!s(c)){n(0,o);return}z.saveRepoConfig({owner:ne(c.get("owner")),name:ne(c.get("name")),branch:ne(c.get("branch")),prefix:ne(c.get("prefix")),token:ne(c.get("token"))},ne(c.get("password"))),Dn("/")}]}class Tr extends P{constructor(e){super(),L(this,e,Pr,Lr,A,{})}}function Mr(t){let e;const n=t[2].default,r=be(n,t,t[1],null);return{c(){r&&r.c()},m(l,o){r&&r.m(l,o),e=!0},p(l,o){r&&r.p&&(!e||o&2)&&ge(r,n,l,l[1],e?he(n,l[1],o,null):$e(l[1]),null)},i(l){e||($(r,l),e=!0)},o(l){y(r,l),e=!1},d(l){r&&r.d(l)}}}function Vr(t){let e,n,r,l,o,s;return o=new Nr({}),{c(){e=h("div"),n=h("div"),r=h("h1"),r.textContent="Tiny CMS",l=E(),D(o.$$.fragment),m(r,"class","text-2xl font-bold mb-6"),m(n,"class","m-auto px-16 py-20 bg-gray-50"),m(e,"class","flex h-screen")},m(a,i){b(a,e,i),p(e,n),p(n,r),p(n,l),S(o,n,null),s=!0},p:R,i(a){s||($(o.$$.fragment,a),s=!0)},o(a){y(o.$$.fragment,a),s=!1},d(a){a&&_(e),C(o)}}}function Ur(t){let e,n,r,l,o,s;return o=new Tr({}),{c(){e=h("div"),n=h("div"),r=h("h1"),r.textContent="Tiny CMS",l=E(),D(o.$$.fragment),m(r,"class","text-2xl font-bold mb-6"),m(n,"class","m-auto px-16 py-20 bg-gray-50"),m(e,"class","flex h-screen")},m(a,i){b(a,e,i),p(e,n),p(n,r),p(n,l),S(o,n,null),s=!0},p:R,i(a){s||($(o.$$.fragment,a),s=!0)},o(a){y(o.$$.fragment,a),s=!1},d(a){a&&_(e),C(o)}}}function Gr(t){let e,n,r,l;const o=[Ur,Vr,Mr],s=[];function a(i,c){return i[0].name?i[0].token?2:1:0}return e=a(t),n=s[e]=o[e](t),{c(){n.c(),r=K()},m(i,c){s[e].m(i,c),b(i,r,c),l=!0},p(i,[c]){let f=e;e=a(i),e===f?s[e].p(i,c):(W(),y(s[f],1,1,()=>{s[f]=null}),H(),n=s[e],n?n.p(i,c):(n=s[e]=o[e](i),n.c()),$(n,1),n.m(r.parentNode,r))},i(i){l||($(n),l=!0)},o(i){y(n),l=!1},d(i){i&&_(r),s[e].d(i)}}}function Kr(t,e,n){let r;Z(t,z,s=>n(0,r=s));let{$$slots:l={},$$scope:o}=e;return ye(()=>{z.initRepoConfig()}),t.$$set=s=>{"$$scope"in s&&n(1,o=s.$$scope)},[r,o,l]}class Jr extends P{constructor(e){super(),L(this,e,Kr,Gr,A,{})}}const Wr=[{id:"required",component:"checkbox",label:"Required",validators:[]},{id:"min",component:"text",label:"Min",validators:[{validator:"required"},{validator:"regex",props:{regex:"^[0-9]*$"}}]},{id:"max",component:"text",label:"Max",validators:[{validator:"required"},{validator:"regex",props:{regex:"^[0-9]*$"}}]},{id:"regex",component:"text",label:"Regex",validators:[{validator:"required"},{validator:"regex",props:{regex:"^[0-9]*$"}}]}];function Hr(t){let e;return{c(){e=h("button"),e.textContent="Submit",m(e,"class","btn-base"),m(e,"type","submit")},m(n,r){b(n,e,r)},p:R,d(n){n&&_(e)}}}function zr(t){let e,n,r,l;return e=new Ee({props:{fields:t[1],data:t[2],formErrors:t[0],disabled:!1}}),r=new Y({props:{$$slots:{default:[Hr]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment),n=E(),D(r.$$.fragment)},m(o,s){S(e,o,s),b(o,n,s),S(r,o,s),l=!0},p(o,s){const a={};s&1&&(a.formErrors=o[0]),e.$set(a);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),r.$set(i)},i(o){l||($(e.$$.fragment,o),$(r.$$.fragment,o),l=!0)},o(o){y(e.$$.fragment,o),y(r.$$.fragment,o),l=!1},d(o){o&&_(n),C(e,o),C(r,o)}}}function Xr(t){let e,n,r,l,o;return n=new le({props:{$$slots:{default:[zr]},$$scope:{ctx:t}}}),{c(){e=h("form"),D(n.$$.fragment)},m(s,a){b(s,e,a),S(n,e,null),r=!0,l||(o=M(e,"submit",we(t[3])),l=!0)},p(s,a){const i={};a&33&&(i.$$scope={dirty:a,ctx:s}),n.$set(i)},i(s){r||($(n.$$.fragment,s),r=!0)},o(s){y(n.$$.fragment,s),r=!1},d(s){s&&_(e),C(n),l=!1,o()}}}function Yr(t){let e,n,r,l,o;return l=new me({props:{label:"Login",$$slots:{default:[Xr]},$$scope:{ctx:t}}}),{c(){e=h("div"),n=h("h1"),n.textContent="Home",r=E(),D(l.$$.fragment)},m(s,a){b(s,e,a),p(e,n),p(e,r),S(l,e,null),o=!0},p(s,[a]){const i={};a&33&&(i.$$scope={dirty:a,ctx:s}),l.$set(i)},i(s){o||($(l.$$.fragment,s),o=!0)},o(s){y(l.$$.fragment,s),o=!1},d(s){s&&_(e),C(l)}}}function Qr(t,e,n){const r=Wr;let{formErrors:l,formValidate:o}=ke(r);const s=Je(r);return[l,r,s,async i=>{const c=new FormData(i.target);if(console.log(c),!o(c)){n(0,l);return}}]}class Zr extends P{constructor(e){super(),L(this,e,Qr,Yr,A,{})}}function xr(t){let e,n,r;return{c(){e=h("h4"),e.textContent="Commit:",n=E(),r=h("p"),r.textContent=`${t[1]}`},m(l,o){b(l,e,o),b(l,n,o),b(l,r,o)},p:R,d(l){l&&(_(e),_(n),_(r))}}}function el(t){let e,n,r,l,o,s,a,i,c=t[0].owner+"",f,u,d,g,w=t[0].name+"",F,j,N,B,T=t[0].token+"",k,q,v=t[1]&&xr(t);return{c(){e=h("div"),n=h("h1"),n.textContent="About",r=E(),l=h("div"),o=h("h1"),o.textContent="Main",s=E(),a=h("p"),i=I("owner: "),f=I(c),u=E(),d=h("p"),g=I("Name: "),F=I(w),j=E(),N=h("p"),B=I("Token: "),k=I(T),q=E(),v&&v.c(),m(l,"class","bg-slate-200")},m(O,U){b(O,e,U),p(e,n),p(e,r),p(e,l),p(l,o),p(l,s),p(l,a),p(a,i),p(a,f),p(l,u),p(l,d),p(d,g),p(d,F),p(l,j),p(l,N),p(N,B),p(N,k),p(e,q),v&&v.m(e,null)},p(O,[U]){U&1&&c!==(c=O[0].owner+"")&&V(f,c),U&1&&w!==(w=O[0].name+"")&&V(F,w),U&1&&T!==(T=O[0].token+"")&&V(k,T),O[1]&&v.p(O,U)},i:R,o:R,d(O){O&&_(e),v&&v.d()}}}function tl(t,e,n){let r;return Z(t,z,o=>n(0,r=o)),[r,void 0]}class nl extends P{constructor(e){super(),L(this,e,tl,el,A,{})}}function rl(t){let e;return{c(){e=h("div"),e.innerHTML="<h1>Not Found</h1>"},m(n,r){b(n,e,r)},p:R,i:R,o:R,d(n){n&&_(e)}}}class ll extends P{constructor(e){super(),L(this,e,null,rl,A,{})}}function it(t,e,n){const r=t.slice();return r[1]=e[n],r}function at(t){let e,n,r=t[1].label+"",l,o;return{c(){e=h("li"),n=h("a"),l=I(r),m(n,"href",o=t[1].path),m(e,"class","py-4 px-4 border-b w-full hover:bg-gray-100 hover:text-gray-900 active:bg-gray-100 tc-transition")},m(s,a){b(s,e,a),p(e,n),p(n,l)},p(s,a){a&1&&r!==(r=s[1].label+"")&&V(l,r),a&1&&o!==(o=s[1].path)&&m(n,"href",o)},d(s){s&&_(e)}}}function ol(t){let e,n,r,l,o,s,a,i,c,f=G(t[0]),u=[];for(let d=0;d<f.length;d+=1)u[d]=at(it(t,f,d));return{c(){e=h("nav"),n=h("h1"),n.textContent="Tiny CMS",r=E(),l=h("ul");for(let d=0;d<u.length;d+=1)u[d].c();o=E(),s=h("li"),a=h("a"),a.textContent="Logout",m(n,"class","text-2xl font-bold bg-blue-600 text-white py-6 pr-4"),m(a,"href","#/"),m(s,"class","py-4 px-4 border-b w-full hover:bg-gray-100 hover:text-gray-900 active:bg-gray-100 tc-transition"),m(l,"class","flex flex-col items-end"),m(e,"class","col-span-1 text-end bg-gray-50")},m(d,g){b(d,e,g),p(e,n),p(e,r),p(e,l);for(let w=0;w<u.length;w+=1)u[w]&&u[w].m(l,null);p(l,o),p(l,s),p(s,a),i||(c=M(a,"click",z.logout),i=!0)},p(d,[g]){if(g&1){f=G(d[0]);let w;for(w=0;w<f.length;w+=1){const F=it(d,f,w);u[w]?u[w].p(F,g):(u[w]=at(F),u[w].c(),u[w].m(l,o))}for(;w<u.length;w+=1)u[w].d(1);u.length=f.length}},i:R,o:R,d(d){d&&_(e),x(u,d),i=!1,c()}}}function sl(t,e,n){let{entries:r=[]}=e;return t.$$set=l=>{"entries"in l&&n(0,r=l.entries)},[r]}class il extends P{constructor(e){super(),L(this,e,sl,ol,A,{entries:0})}}const J=Oe(""),De="cache@",Ne=t=>{sessionStorage.setItem(De+t.path,JSON.stringify(t))},Jt=(t,e)=>{const n=sessionStorage.getItem(De+t);if(!n)return;const r=JSON.parse(n);if(e!==r.oid){sessionStorage.removeItem(De+t);return}return r},Wt=t=>{sessionStorage.removeItem(De+t)},Ht=t=>(t.prefix?t.prefix.concat("/"):"").concat("definitions"),We=(t,e)=>Ht(t).concat("/",e,".json"),zt=(t,e)=>(t.prefix?t.prefix.concat("/"):"").concat("collections","/",e),He=(t,e,n)=>zt(t,e).concat("/",n,".json"),al="https://api.github.com/graphql",oe=async(t,e)=>{const n={method:"POST",headers:{authorization:`bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(e)},r=await fetch(al,n);if(!r.ok)throw new Error(`Response: ${r.status} - ${r.statusText}`);const l=await r.json();if(l.errors){const o=l.errors.map(s=>s.message);throw new Error(o.join(", "))}return l},cl=(t,e)=>{const n=[];n.push(`
    query getFile($owner: String!, $name: String!) {
        repository(owner: $owner, name: $name) {
    `);let r=0;return e.forEach(l=>{n.push(`
        _${r++}: object(expression: "${t.branch}:${l}") {
            ... on Blob {
              text
              oid
            }
          }
        `)}),n.push(`
        }
    }
    `),{query:n.join(),variables:{owner:t.owner,name:t.name}}},fl=async(t,e)=>{const r=(await oe(t.token,cl(t,e))).data.repository,l=[];for(const[o,s]of Object.entries(r)){const a=e[parseInt(o.substring(1))],i=s;i.path=a,l.push(i)}if(e.length!==l.length)throw new Error(`Expected: ${e.length} current: ${l.length}`);return l},ul=`
query Listing($owner: String!, $name: String!, $path: String!) {
    repository(owner: $owner, name: $name) {
      object(expression: $path) {
        ... on Tree {
          entries {
            name
            type
            oid
          }
        }
      }
    }
  }
    `,dl=(t,e)=>({query:ul,variables:{owner:t.owner,name:t.name,path:`${t.branch}:${e}`}}),ml=async(t,e)=>{const n=await oe(t.token,dl(t,e));return n.data.repository.object==null?[]:n.data.repository.object.entries},pl=(t,e)=>{const n=new Map,r=[];for(const l of e){const o=t.concat("/",l.name),s=Jt(o,l.oid);s?n.set(l.oid,s.text):r.push(o)}return{cached:n,uncached:r}},Xt=async(t,e)=>{const n=await ml(t,e),{cached:r,uncached:l}=pl(e,n);l.length>0&&(await fl(t,l)).forEach(a=>{Ne(a),r.set(a.oid,a.text)});const o=[];for(const s of n){let a=r.get(s.oid);if(!a)throw new Error(`Listing for: ${e} file not found: ${s.name}`);o.push(JSON.parse(a))}return o},ct=async(t,e)=>{if(!e)throw new Error("getCollectionListing - Insufficient parameter");const n=zt(t,e);return Xt(t,n)},ft=async t=>{const e=Ht(t);return Xt(t,e)},_l=`
query getCommit($owner: String!, $name: String!, $branch: String!) {
  repository(owner: $owner, name: $name) {
    ref(qualifiedName: $branch) {
      target {
        ... on Commit {
          history(first: 1) {
            nodes {
              oid
            }
          }
        }
      }
    }
  }
}    
`,bl=(t,e)=>({query:e,variables:{owner:t.owner,name:t.name,branch:t.branch}}),hl=t=>t.ref.target.history.nodes[0].oid,gl=async t=>{const e=await oe(t.token,bl(t,_l));return hl(e.data.repository)},Be=async t=>gl(t),$l=`
mutation ($committableBranch: CommittableBranch!, $path: String!, $oid: GitObjectID!) {
  createCommitOnBranch(
    input: {
      branch: $committableBranch, 
      message: {
        headline: "Delete file"
      }, 
      fileChanges: {
        deletions: [
          {
            path: $path
          }
        ]
      }, 
      expectedHeadOid: $oid
    }
  ) {
    commit {
      oid
    }
  }
}   
`,wl=(t,e,n)=>({query:$l,variables:{committableBranch:{repositoryNameWithOwner:`${t.owner}/${t.name}`,branchName:t.branch},path:e,oid:n}}),yl=t=>t.createCommitOnBranch.commit.oid,Yt=async(t,e,n)=>{const r=await oe(t.token,wl(t,e,n));return yl(r.data)},kl=`
query getFile($owner: String!, $name: String!, $branch: String!, $exp: String!) {
    repository(owner: $owner, name: $name) {
      object(expression: $exp) {
        ... on Blob {
          oid
        }
      }
      ref(qualifiedName: $branch) {
        target {
          ... on Commit {
            history(first: 1) {
              nodes {
                oid
              }
            }
          }
        }
      }
    }
  }    
`,vl=`
query getFile($owner: String!, $name: String!, $branch: String!, $exp: String!) {
    repository(owner: $owner, name: $name) {
      object(expression: $exp) {
        ... on Blob {
          text
          oid
        }
      }
      ref(qualifiedName: $branch) {
        target {
          ... on Commit {
            history(first: 1) {
              nodes {
                oid
              }
            }
          }
        }
      }
    }
  }    
`,Qt=(t,e,n)=>({query:e,variables:{owner:t.owner,name:t.name,branch:t.branch,exp:`${t.branch}:${n}`}}),Zt=t=>t.ref.target.history.nodes[0].oid,xt=t=>t.object===null?null:t.object.oid,El=t=>t.object.text,en=async(t,e)=>{const r=(await oe(t.token,Qt(t,kl,e))).data.repository;return{path:e,oid:xt(r),commit:Zt(r)}},Sl=async(t,e)=>{const r=(await oe(t.token,Qt(t,vl,e))).data.repository,l=xt(r);if(l===null)throw new Error(`File does not exist: ${e}`);return{data:{path:e,oid:l,text:El(r)},commit:Zt(r)}},Cl=`
mutation ($committableBranch: CommittableBranch!, $path: String!, $content: Base64String!, $oid: GitObjectID!) {
    createCommitOnBranch (input: {
        branch : $committableBranch
        message: {
            headline: "Update file content"
        }
        fileChanges: {
            additions: [{
                path: $path
                contents: $content
            }]
        }
        expectedHeadOid: $oid
    }) {
        commit {
            oid
            file (path:$path) {
              oid
            }
        }
    }
}
`,Dl=(t,e,n,r)=>({query:Cl,variables:{committableBranch:{repositoryNameWithOwner:`${t.owner}/${t.name}`,branchName:t.branch},path:e,content:r,oid:n}}),Fl=t=>t.createCommitOnBranch.commit.oid,ql=t=>t.createCommitOnBranch.commit.file.oid,tn=async(t,e,n,r)=>{r.tc_modified=new Date().getTime();const l=JSON.stringify(r),o=await oe(t.token,Dl(t,e,n,btoa(l)));return{commit:Fl(o.data),data:{path:e,oid:ql(o.data),text:l}}},nn=async(t,e)=>{const n=await en(t,e);if(n.oid===null)throw new Error(`File does not exist: ${e}`);const r=Jt(e,n.oid);if(r)return{data:JSON.parse(r.text),commit:n.commit};const l=await Sl(t,e);return Ne(l.data),{data:JSON.parse(l.data.text),commit:l.commit}},rn=async(t,e,n)=>{const r=await en(t,e);if(r.commit!==n)throw new Error(`Current commit: ${r.commit} is not: ${n}`);return r.oid!==null},Il=async(t,e,n)=>{if(!e||!n)throw new Error("getItemFile - Insufficient parameter");const r=He(t,e,n);return nn(t,r)},Ol=async(t,e,n,r,l,o)=>{if(!e||!n||!r||!l)throw new Error("updateItemFile - Insufficient parameter");const s=He(t,e,n);if(o&&await rn(t,s,r))throw new Error(`Item with id: ${n} already exists!`);const a=await tn(t,s,r,l);return Ne(a.data),{commit:a.commit,data:JSON.parse(a.data.text)}},Nl=async(t,e,n,r)=>{if(!e||!n||!r)throw new Error("deleteItemFile - Insufficient parameter");const l=He(t,e,n),o=await Yt(t,l,r);return Wt(l),o},ln=async(t,e)=>{if(!e)throw new Error("getDefinitionFile - Insufficient parameter");const n=We(t,e);return nn(t,n)},Bl=async(t,e,n,r,l)=>{if(!e||!n||!r)throw new Error("updateDefinitionFile - Insufficient parameter");const o=We(t,e);if(l&&await rn(t,o,n))throw new Error(`Definition with id: ${e} already exists!`);const s=await tn(t,o,n,r);return Ne(s.data),{commit:s.commit,data:JSON.parse(s.data.text)}},Rl=async(t,e,n)=>{if(!e||!n)throw new Error("deleteDefinitionFile - Insufficient parameter");const r=We(t,e),l=await Yt(t,r,n);return Wt(r),l};function ut(t,e,n){const r=t.slice();return r[4]=e[n],r}function dt(t){let e,n=t[4].label+"",r,l,o;return{c(){e=h("button"),r=I(n),m(e,"class","btn-base")},m(s,a){b(s,e,a),p(e,r),l||(o=M(e,"click",function(){qe(t[4].onclick)&&t[4].onclick.apply(this,arguments)}),l=!0)},p(s,a){t=s,a&4&&n!==(n=t[4].label+"")&&V(r,n)},d(s){s&&_(e),l=!1,o()}}}function jl(t){let e,n=G(t[2]),r=[];for(let l=0;l<n.length;l+=1)r[l]=dt(ut(t,n,l));return{c(){for(let l=0;l<r.length;l+=1)r[l].c();e=K()},m(l,o){for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(l,o);b(l,e,o)},p(l,o){if(o&4){n=G(l[2]);let s;for(s=0;s<n.length;s+=1){const a=ut(l,n,s);r[s]?r[s].p(a,o):(r[s]=dt(a),r[s].c(),r[s].m(e.parentNode,e))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(l){l&&_(e),x(r,l)}}}function Al(t){let e,n,r,l,o,s,a,i,c,f,u,d;return u=new Y({props:{$$slots:{default:[jl]},$$scope:{ctx:t}}}),{c(){e=h("div"),n=h("div"),r=h("div"),l=I(t[0]),s=E(),a=h("div"),i=I(t[1]),c=E(),f=h("div"),D(u.$$.fragment),m(r,"class",o="text-lg pb-2 border-b "+(t[3]==="error"?"text-red-900":"")),m(a,"class","my-6"),m(n,"class","relative top-1/3 mx-auto max-w-md bg-white rounded-md shadow-xl p-6"),m(e,"class","fixed z-50 inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full")},m(g,w){b(g,e,w),p(e,n),p(n,r),p(r,l),p(n,s),p(n,a),p(a,i),p(n,c),p(n,f),S(u,f,null),d=!0},p(g,[w]){(!d||w&1)&&V(l,g[0]),(!d||w&8&&o!==(o="text-lg pb-2 border-b "+(g[3]==="error"?"text-red-900":"")))&&m(r,"class",o),(!d||w&2)&&V(i,g[1]);const F={};w&132&&(F.$$scope={dirty:w,ctx:g}),u.$set(F)},i(g){d||($(u.$$.fragment,g),d=!0)},o(g){y(u.$$.fragment,g),d=!1},d(g){g&&_(e),C(u)}}}function Ll(t,e,n){let{title:r}=e,{desc:l}=e,{buttons:o}=e,{type:s="ok"}=e;return t.$$set=a=>{"title"in a&&n(0,r=a.title),"desc"in a&&n(1,l=a.desc),"buttons"in a&&n(2,o=a.buttons),"type"in a&&n(3,s=a.type)},[r,l,o,s]}class on extends P{constructor(e){super(),L(this,e,Ll,Al,A,{title:0,desc:1,buttons:2,type:3})}}function mt(t){let e,n;return e=new on({props:{title:"Delete Entry",desc:"Do you want to delete entry: '"+t[0].tc_title+"'",buttons:[{label:"Close",onclick:t[2]},{label:"Delete",onclick:t[3]}]}}),{c(){D(e.$$.fragment)},m(r,l){S(e,r,l),n=!0},p(r,l){const o={};l&1&&(o.desc="Do you want to delete entry: '"+r[0].tc_title+"'"),l&3&&(o.buttons=[{label:"Close",onclick:r[2]},{label:"Delete",onclick:r[3]}]),e.$set(o)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){y(e.$$.fragment,r),n=!1},d(r){C(e,r)}}}function Pl(t){let e,n,r=t[0]&&mt(t);return{c(){r&&r.c(),e=K()},m(l,o){r&&r.m(l,o),b(l,e,o),n=!0},p(l,[o]){l[0]?r?(r.p(l,o),o&1&&$(r,1)):(r=mt(l),r.c(),$(r,1),r.m(e.parentNode,e)):r&&(W(),y(r,1,1,()=>{r=null}),H())},i(l){n||($(r),n=!0)},o(l){y(r),n=!1},d(l){l&&_(e),r&&r.d(l)}}}function Tl(t,e,n){let{deleteEntry:r}=e,{doDelete:l}=e;const o=()=>{n(0,r=null)},s=async()=>{r&&(await l(r.tc_id),n(0,r=null))};return t.$$set=a=>{"deleteEntry"in a&&n(0,r=a.deleteEntry),"doDelete"in a&&n(1,l=a.doDelete)},[r,l,o,s]}class sn extends P{constructor(e){super(),L(this,e,Tl,Pl,A,{deleteEntry:0,doDelete:1})}}function pt(t,e,n){const r=t.slice();return r[8]=e[n],r}function Ml(t){let e,n,r,l,o;function s(){return t[4](t[8])}function a(){return t[5](t[8])}return{c(){e=h("button"),e.textContent="Show",n=E(),r=h("button"),r.textContent="Delete",m(e,"class","btn-base"),m(r,"class","btn-base")},m(i,c){b(i,e,c),b(i,n,c),b(i,r,c),l||(o=[M(e,"click",s),M(r,"click",a)],l=!0)},p(i,c){t=i},d(i){i&&(_(e),_(n),_(r)),l=!1,te(o)}}}function _t(t){let e,n,r=t[8].tc_id+"",l,o,s,a=t[8].tc_title+"",i,c,f,u=new Date(t[8].tc_modified).toLocaleDateString()+"",d,g,w,F,j,N;return F=new Y({props:{$$slots:{default:[Ml]},$$scope:{ctx:t}}}),{c(){e=h("tr"),n=h("td"),l=I(r),o=E(),s=h("td"),i=I(a),c=E(),f=h("td"),d=I(u),g=E(),w=h("td"),D(F.$$.fragment),j=E(),m(n,"class","tb-cell"),m(s,"class","tb-cell"),m(f,"class","tb-cell"),m(w,"class","tb-cell"),m(e,"class","tb-row")},m(B,T){b(B,e,T),p(e,n),p(n,l),p(e,o),p(e,s),p(s,i),p(e,c),p(e,f),p(f,d),p(e,g),p(e,w),S(F,w,null),p(e,j),N=!0},p(B,T){(!N||T&4)&&r!==(r=B[8].tc_id+"")&&V(l,r),(!N||T&4)&&a!==(a=B[8].tc_title+"")&&V(i,a),(!N||T&4)&&u!==(u=new Date(B[8].tc_modified).toLocaleDateString()+"")&&V(d,u);const k={};T&2055&&(k.$$scope={dirty:T,ctx:B}),F.$set(k)},i(B){N||($(F.$$.fragment,B),N=!0)},o(B){y(F.$$.fragment,B),N=!1},d(B){B&&_(e),C(F)}}}function Vl(t){let e,n,r;return{c(){e=h("button"),e.textContent="Create",m(e,"class","btn-base")},m(l,o){b(l,e,o),n||(r=M(e,"click",t[6]),n=!0)},p:R,d(l){l&&_(e),n=!1,r()}}}function Ul(t){let e,n,r,l,o,s,a=G(t[2]),i=[];for(let f=0;f<a.length;f+=1)i[f]=_t(pt(t,a,f));const c=f=>y(i[f],1,1,()=>{i[f]=null});return o=new Y({props:{$$slots:{default:[Vl]},$$scope:{ctx:t}}}),{c(){e=h("table"),n=h("tr"),n.innerHTML='<th class="tb-cell">ID</th> <th class="tb-cell">Title</th> <th class="tb-cell">Modified</th> <th class="tb-cell"></th>',r=E();for(let f=0;f<i.length;f+=1)i[f].c();l=E(),D(o.$$.fragment),m(n,"class","tb-head"),m(e,"class","shadow w-full")},m(f,u){b(f,e,u),p(e,n),p(e,r);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(e,null);b(f,l,u),S(o,f,u),s=!0},p(f,u){if(u&7){a=G(f[2]);let g;for(g=0;g<a.length;g+=1){const w=pt(f,a,g);i[g]?(i[g].p(w,u),$(i[g],1)):(i[g]=_t(w),i[g].c(),$(i[g],1),i[g].m(e,null))}for(W(),g=a.length;g<i.length;g+=1)c(g);H()}const d={};u&2049&&(d.$$scope={dirty:u,ctx:f}),o.$set(d)},i(f){if(!s){for(let u=0;u<a.length;u+=1)$(i[u]);$(o.$$.fragment,f),s=!0}},o(f){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)y(i[u]);y(o.$$.fragment,f),s=!1},d(f){f&&(_(e),_(l)),x(i,f),C(o,f)}}}function Gl(t){let e,n,r=t[0].collection+"",l,o,s,a,i,c;return s=new le({props:{$$slots:{default:[Ul]},$$scope:{ctx:t}}}),i=new sn({props:{deleteEntry:t[1],doDelete:t[3]}}),{c(){e=h("h3"),n=I("Collection "),l=I(r),o=E(),D(s.$$.fragment),a=E(),D(i.$$.fragment),m(e,"class","text-xl pb-6")},m(f,u){b(f,e,u),p(e,n),p(e,l),b(f,o,u),S(s,f,u),b(f,a,u),S(i,f,u),c=!0},p(f,[u]){(!c||u&1)&&r!==(r=f[0].collection+"")&&V(l,r);const d={};u&2055&&(d.$$scope={dirty:u,ctx:f}),s.$set(d);const g={};u&2&&(g.deleteEntry=f[1]),i.$set(g)},i(f){c||($(s.$$.fragment,f),$(i.$$.fragment,f),c=!0)},o(f){y(s.$$.fragment,f),y(i.$$.fragment,f),c=!1},d(f){f&&(_(e),_(o),_(a)),C(s,f),C(i,f)}}}function Kl(t,e,n){let r;Z(t,z,u=>n(7,r=u));let{params:l={collection:""}}=e,o=null,s=[];const a=async u=>{try{const d=await Be(r),g=await Nl(r,l.collection,u,d);n(2,s=await ct(r,l.collection))}catch(d){J.set(X(d))}};ye(async()=>{try{n(2,s=await ct(r,l.collection))}catch(u){J.set(X(u))}});const i=u=>Q(`#/collection/${l.collection}/item/${u.tc_id}`),c=u=>n(1,o=u),f=()=>Q(`#/collection/${l.collection}/create`);return t.$$set=u=>{"params"in u&&n(0,l=u.params)},[l,o,s,a,i,c,f]}class Jl extends P{constructor(e){super(),L(this,e,Kl,Gl,A,{params:0})}}function bt(t,e,n){const r=t.slice();return r[8]=e[n],r}function Wl(t){let e,n,r,l,o,s,a;function i(){return t[3](t[8])}function c(){return t[4](t[8])}function f(){return t[5](t[8])}return{c(){e=h("button"),e.textContent="Show",n=E(),r=h("button"),r.textContent="Delete",l=E(),o=h("button"),o.textContent="Collection",m(e,"class","btn-base"),m(r,"class","btn-base"),m(o,"class","btn-base")},m(u,d){b(u,e,d),b(u,n,d),b(u,r,d),b(u,l,d),b(u,o,d),s||(a=[M(e,"click",i),M(r,"click",c),M(o,"click",f)],s=!0)},p(u,d){t=u},d(u){u&&(_(e),_(n),_(r),_(l),_(o)),s=!1,te(a)}}}function ht(t){let e,n,r=t[8].tc_id+"",l,o,s,a=t[8].tc_title+"",i,c,f,u=new Date(t[8].tc_modified).toLocaleDateString()+"",d,g,w,F,j,N;return F=new Y({props:{$$slots:{default:[Wl]},$$scope:{ctx:t}}}),{c(){e=h("tr"),n=h("td"),l=I(r),o=E(),s=h("td"),i=I(a),c=E(),f=h("td"),d=I(u),g=E(),w=h("td"),D(F.$$.fragment),j=E(),m(n,"class","tb-cell"),m(s,"class","tb-cell"),m(f,"class","tb-cell"),m(w,"class","tb-cell"),m(e,"class","tb-row")},m(B,T){b(B,e,T),p(e,n),p(n,l),p(e,o),p(e,s),p(s,i),p(e,c),p(e,f),p(f,d),p(e,g),p(e,w),S(F,w,null),p(e,j),N=!0},p(B,T){(!N||T&1)&&r!==(r=B[8].tc_id+"")&&V(l,r),(!N||T&1)&&a!==(a=B[8].tc_title+"")&&V(i,a),(!N||T&1)&&u!==(u=new Date(B[8].tc_modified).toLocaleDateString()+"")&&V(d,u);const k={};T&2051&&(k.$$scope={dirty:T,ctx:B}),F.$set(k)},i(B){N||($(F.$$.fragment,B),N=!0)},o(B){y(F.$$.fragment,B),N=!1},d(B){B&&_(e),C(F)}}}function Hl(t){let e,n,r;return{c(){e=h("button"),e.textContent="Create",m(e,"class","btn-base")},m(l,o){b(l,e,o),n||(r=M(e,"click",t[6]),n=!0)},p:R,d(l){l&&_(e),n=!1,r()}}}function zl(t){let e,n,r,l,o,s,a=G(t[0]),i=[];for(let f=0;f<a.length;f+=1)i[f]=ht(bt(t,a,f));const c=f=>y(i[f],1,1,()=>{i[f]=null});return o=new Y({props:{$$slots:{default:[Hl]},$$scope:{ctx:t}}}),{c(){e=h("table"),n=h("tr"),n.innerHTML='<th class="tb-cell">ID</th> <th class="tb-cell">Title</th> <th class="tb-cell">Modified</th> <th class="tb-cell"></th>',r=E();for(let f=0;f<i.length;f+=1)i[f].c();l=E(),D(o.$$.fragment),m(n,"class","tb-head"),m(e,"class","bg-white shadow w-full")},m(f,u){b(f,e,u),p(e,n),p(e,r);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(e,null);b(f,l,u),S(o,f,u),s=!0},p(f,u){if(u&3){a=G(f[0]);let g;for(g=0;g<a.length;g+=1){const w=bt(f,a,g);i[g]?(i[g].p(w,u),$(i[g],1)):(i[g]=ht(w),i[g].c(),$(i[g],1),i[g].m(e,null))}for(W(),g=a.length;g<i.length;g+=1)c(g);H()}const d={};u&2048&&(d.$$scope={dirty:u,ctx:f}),o.$set(d)},i(f){if(!s){for(let u=0;u<a.length;u+=1)$(i[u]);$(o.$$.fragment,f),s=!0}},o(f){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)y(i[u]);y(o.$$.fragment,f),s=!1},d(f){f&&(_(e),_(l)),x(i,f),C(o,f)}}}function Xl(t){let e,n;return e=new le({props:{$$slots:{default:[zl]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},m(r,l){S(e,r,l),n=!0},p(r,l){const o={};l&2051&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){y(e.$$.fragment,r),n=!1},d(r){C(e,r)}}}function Yl(t){let e,n,r,l;return e=new me({props:{label:"Definitions",$$slots:{default:[Xl]},$$scope:{ctx:t}}}),r=new sn({props:{deleteEntry:t[1],doDelete:t[2]}}),{c(){D(e.$$.fragment),n=E(),D(r.$$.fragment)},m(o,s){S(e,o,s),b(o,n,s),S(r,o,s),l=!0},p(o,[s]){const a={};s&2051&&(a.$$scope={dirty:s,ctx:o}),e.$set(a);const i={};s&2&&(i.deleteEntry=o[1]),r.$set(i)},i(o){l||($(e.$$.fragment,o),$(r.$$.fragment,o),l=!0)},o(o){y(e.$$.fragment,o),y(r.$$.fragment,o),l=!1},d(o){o&&_(n),C(e,o),C(r,o)}}}function Ql(t,e,n){let r;Z(t,z,u=>n(7,r=u));let l=[],o=null;const s=async u=>{try{const d=await Be(r),g=await Rl(r,u,d);n(0,l=await ft(r))}catch(d){J.set(X(d))}};return ye(async()=>{try{n(0,l=await ft(r))}catch(u){J.set(X(u))}}),[l,o,s,u=>Q("#/definitions/definition/"+u.tc_id),u=>n(1,o=u),u=>Q("#/collection/"+u.tc_id),()=>Q("#/definitions/create")]}class Zl extends P{constructor(e){super(),L(this,e,Ql,Yl,A,{})}}const xl=(t,e,n)=>{t&&(n.tc_id=e.tc_id),n.tc_title=e.tc_title;for(const r in e.data)n[r]=e.data[r];return n},eo=(t,e,n,r)=>(e&&(t.tc_id=Ce(n,"tc_id","No id")),t.tc_title=Ce(n,"tc_title","No title"),r.forEach(l=>{t.data[l.id]=n.get(l.id)}),t);function gt(t){let e,n,r,l=new Date(t[0].tc_modified).toLocaleString()+"",o,s,a,i,c=t[1].substring(0,7)+"",f,u,d,g,w=t[0].tc_id+"",F;return{c(){e=h("div"),n=h("div"),r=I("Modifield: "),o=I(l),s=E(),a=h("div"),i=I("Commit: "),f=I(c),u=E(),d=h("h3"),g=I("ID: "),F=I(w),m(e,"class","text-sm text-right text-gray-500 pb-4"),m(d,"class","pb-4")},m(j,N){b(j,e,N),p(e,n),p(n,r),p(n,o),p(e,s),p(e,a),p(a,i),p(a,f),b(j,u,N),b(j,d,N),p(d,g),p(d,F)},p(j,N){N&1&&l!==(l=new Date(j[0].tc_modified).toLocaleString()+"")&&V(o,l),N&2&&c!==(c=j[1].substring(0,7)+"")&&V(f,c),N&1&&w!==(w=j[0].tc_id+"")&&V(F,w)},d(j){j&&(_(e),_(u),_(d))}}}function to(t){let e,n=t[2]&&t[0]&&gt(t);return{c(){n&&n.c(),e=K()},m(r,l){n&&n.m(r,l),b(r,e,l)},p(r,[l]){r[2]&&r[0]?n?n.p(r,l):(n=gt(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:R,o:R,d(r){r&&_(e),n&&n.d(r)}}}function no(t,e,n){let{entry:r}=e,{commit:l}=e,{show:o}=e;return t.$$set=s=>{"entry"in s&&n(0,r=s.entry),"commit"in s&&n(1,l=s.commit),"show"in s&&n(2,o=s.show)},[r,l,o]}class an extends P{constructor(e){super(),L(this,e,no,to,A,{entry:0,commit:1,show:2})}}const ro={id:"tc_id",component:"text",label:"Id",validators:[{validator:"required"},{validator:"regex",props:{regex:"^[a-zA-Z0-9_-]*$"}},{validator:"max",props:{max:32}}]},lo={id:"tc_title",component:"text",label:"Title",validators:[{validator:"required"},{validator:"max",props:{max:64}}]},cn=t=>{const e=[];return t&&e.push(ro),e.push(lo),e};function $t(t){let e,n;return e=new me({props:{label:`Collection: ${t[2].tc_title} Item: ${t[3].tc_title}`,$$slots:{default:[fo]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},m(r,l){S(e,r,l),n=!0},p(r,l){const o={};l&12&&(o.label=`Collection: ${r[2].tc_title} Item: ${r[3].tc_title}`),l&524539&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){y(e.$$.fragment,r),n=!1},d(r){C(e,r)}}}function oo(t){let e,n,r,l=!t[8]&&io(t);return{c(){e=h("button"),e.textContent="Submit",n=E(),l&&l.c(),r=K(),m(e,"class","btn-base"),m(e,"type","submit")},m(o,s){b(o,e,s),b(o,n,s),l&&l.m(o,s),b(o,r,s)},p(o,s){o[8]||l.p(o,s)},d(o){o&&(_(e),_(n),_(r)),l&&l.d(o)}}}function so(t){let e,n,r;return{c(){e=h("button"),e.textContent="Edit",m(e,"class","btn-base"),m(e,"type","button")},m(l,o){b(l,e,o),n||(r=M(e,"click",t[10]),n=!0)},p:R,d(l){l&&_(e),n=!1,r()}}}function io(t){let e,n,r;return{c(){e=h("button"),e.textContent="Cancel",m(e,"class","btn-base"),m(e,"type","button")},m(l,o){b(l,e,o),n||(r=M(e,"click",t[11]),n=!0)},p:R,d(l){l&&_(e),n=!1,r()}}}function ao(t){let e,n,r,l;function o(i,c){return i[1]?so:oo}let s=o(t),a=s(t);return{c(){a.c(),e=E(),n=h("button"),n.textContent="Collection",m(n,"class","btn-base"),m(n,"type","button")},m(i,c){a.m(i,c),b(i,e,c),b(i,n,c),r||(l=M(n,"click",t[12]),r=!0)},p(i,c){s===(s=o(i))&&a?a.p(i,c):(a.d(1),a=s(i),a&&(a.c(),a.m(e.parentNode,e)))},d(i){i&&(_(e),_(n)),a.d(i),r=!1,l()}}}function co(t){let e,n,r,l;return e=new Ee({props:{fields:t[5],data:t[7],formErrors:t[6],disabled:t[1]}}),r=new Y({props:{$$slots:{default:[ao]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment),n=E(),D(r.$$.fragment)},m(o,s){S(e,o,s),b(o,n,s),S(r,o,s),l=!0},p(o,s){const a={};s&32&&(a.fields=o[5]),s&128&&(a.data=o[7]),s&64&&(a.formErrors=o[6]),s&2&&(a.disabled=o[1]),e.$set(a);const i={};s&524291&&(i.$$scope={dirty:s,ctx:o}),r.$set(i)},i(o){l||($(e.$$.fragment,o),$(r.$$.fragment,o),l=!0)},o(o){y(e.$$.fragment,o),y(r.$$.fragment,o),l=!1},d(o){o&&_(n),C(e,o),C(r,o)}}}function fo(t){let e,n,r,l,o,s,a;return n=new an({props:{show:!t[8],entry:t[3],commit:t[4]}}),l=new le({props:{$$slots:{default:[co]},$$scope:{ctx:t}}}),{c(){e=h("form"),D(n.$$.fragment),r=E(),D(l.$$.fragment)},m(i,c){b(i,e,c),S(n,e,null),p(e,r),S(l,e,null),o=!0,s||(a=M(e,"submit",we(t[9])),s=!0)},p(i,c){const f={};c&8&&(f.entry=i[3]),c&16&&(f.commit=i[4]),n.$set(f);const u={};c&524515&&(u.$$scope={dirty:c,ctx:i}),l.$set(u)},i(i){o||($(n.$$.fragment,i),$(l.$$.fragment,i),o=!0)},o(i){y(n.$$.fragment,i),y(l.$$.fragment,i),o=!1},d(i){i&&_(e),C(n),C(l),s=!1,a()}}}function uo(t){let e,n,r=t[3]&&t[2]&&$t(t);return{c(){r&&r.c(),e=K()},m(l,o){r&&r.m(l,o),b(l,e,o),n=!0},p(l,[o]){l[3]&&l[2]?r?(r.p(l,o),o&12&&$(r,1)):(r=$t(l),r.c(),$(r,1),r.m(e.parentNode,e)):r&&(W(),y(r,1,1,()=>{r=null}),H())},i(l){n||($(r),n=!0)},o(l){y(r),n=!1},d(l){l&&_(e),r&&r.d(l)}}}function mo(t,e,n){let r,l;Z(t,z,v=>n(13,r=v)),Z(t,Vt,v=>n(14,l=v));let{params:o={collection:"",item:""}}=e,s=l.endsWith(`/collection/${o.collection}/create`),a=!s,i,c,f,u=cn(s),{formErrors:d,formValidate:g,formFieldsUpdate:w}=ke(),F={};const j=async v=>{try{const O=await Ol(r,o.collection,v.tc_id,f,v,s);return n(4,f=O.commit),n(3,c=O.data),!0}catch(O){J.set(X(O))}return!1},N=async v=>{try{const O=new FormData(v.target);if(!Kt(u,O,F)){J.set("The item did not changed!");return}if(!g(O)){n(6,d);return}const U=eo(c,s,O,i.fields);if(!await j(U))return;if(s){Q(`#/collection/${o.collection}`);return}n(1,a=!0)}catch(O){J.set(X(O))}},B=v=>{n(3,c={tc_id:"",tc_title:"",tc_modified:0,data:Je(v.fields)})};ye(async()=>{try{const v=await ln(r,o.collection);if(n(2,i=v.data),s)B(i),n(4,f=await Be(r));else{const O=await Il(r,o.collection,o.item);n(3,c=O.data),n(4,f=O.commit)}n(5,u=w(u.concat(i.fields))),n(7,F=xl(s,c,F))}catch(v){J.set(X(v))}});const T=()=>n(1,a=!1),k=()=>n(1,a=!0),q=()=>Q(`#/collection/${o.collection}`);return t.$$set=v=>{"params"in v&&n(0,o=v.params)},[o,a,i,c,f,u,d,F,s,N,T,k,q]}class wt extends P{constructor(e){super(),L(this,e,mo,uo,A,{params:0})}}const po=(t,e,n)=>(t&&(n.tc_id=e.tc_id),n.tc_title=e.tc_title,n),_o=(t,e,n)=>(e&&(t.tc_id=Ce(n,"tc_id","No id")),t.tc_title=Ce(n,"tc_title","No title"),t);function yt(t,e,n){const r=t.slice();return r[1]=e[n],r}function kt(t,e,n){const r=t.slice();return r[4]=e[n],r}function vt(t){let e,n,r=t[0].value+"",l;return{c(){e=h("p"),n=I("Default value: "),l=I(r)},m(o,s){b(o,e,s),p(e,n),p(e,l)},p(o,s){s&1&&r!==(r=o[0].value+"")&&V(l,r)},d(o){o&&_(e)}}}function Et(t){let e,n=G(t[0].validators),r=[];for(let l=0;l<n.length;l+=1)r[l]=Dt(yt(t,n,l));return{c(){e=h("ul");for(let l=0;l<r.length;l+=1)r[l].c()},m(l,o){b(l,e,o);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null)},p(l,o){if(o&1){n=G(l[0].validators);let s;for(s=0;s<n.length;s+=1){const a=yt(l,n,s);r[s]?r[s].p(a,o):(r[s]=Dt(a),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(l){l&&_(e),x(r,l)}}}function St(t){let e,n=G(Object.keys(t[1].props)),r=[];for(let l=0;l<n.length;l+=1)r[l]=Ct(kt(t,n,l));return{c(){for(let l=0;l<r.length;l+=1)r[l].c();e=K()},m(l,o){for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(l,o);b(l,e,o)},p(l,o){if(o&1){n=G(Object.keys(l[1].props));let s;for(s=0;s<n.length;s+=1){const a=kt(l,n,s);r[s]?r[s].p(a,o):(r[s]=Ct(a),r[s].c(),r[s].m(e.parentNode,e))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(l){l&&_(e),x(r,l)}}}function Ct(t){let e,n,r=t[4]+"",l,o,s=t[1].props[t[4]]+"",a,i;return{c(){e=h("p"),n=I("Key: "),l=I(r),o=I(" value: "),a=I(s),i=E(),m(e,"class","text-sm")},m(c,f){b(c,e,f),p(e,n),p(e,l),p(e,o),p(e,a),p(e,i)},p(c,f){f&1&&r!==(r=c[4]+"")&&V(l,r),f&1&&s!==(s=c[1].props[c[4]]+"")&&V(a,s)},d(c){c&&_(e)}}}function Dt(t){let e,n,r=t[1].validator+"",l,o,s,a=t[1].props&&St(t);return{c(){e=h("h4"),n=I("Validator: "),l=I(r),o=E(),a&&a.c(),s=K()},m(i,c){b(i,e,c),p(e,n),p(e,l),b(i,o,c),a&&a.m(i,c),b(i,s,c)},p(i,c){c&1&&r!==(r=i[1].validator+"")&&V(l,r),i[1].props?a?a.p(i,c):(a=St(i),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null)},d(i){i&&(_(e),_(o),_(s)),a&&a.d(i)}}}function bo(t){let e,n,r,l=t[0].label+"",o,s,a=t[0].id+"",i,c,f,u,d=t[0].value&&vt(t),g=t[0].validators&&Et(t);return{c(){e=h("div"),n=h("h4"),r=I("Field: "),o=I(l),s=I(" - ("),i=I(a),c=I(")"),f=E(),d&&d.c(),u=E(),g&&g.c()},m(w,F){b(w,e,F),p(e,n),p(n,r),p(n,o),p(n,s),p(n,i),p(n,c),p(e,f),d&&d.m(e,null),p(e,u),g&&g.m(e,null)},p(w,[F]){F&1&&l!==(l=w[0].label+"")&&V(o,l),F&1&&a!==(a=w[0].id+"")&&V(i,a),w[0].value?d?d.p(w,F):(d=vt(w),d.c(),d.m(e,u)):d&&(d.d(1),d=null),w[0].validators?g?g.p(w,F):(g=Et(w),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},i:R,o:R,d(w){w&&_(e),d&&d.d(),g&&g.d()}}}function ho(t,e,n){let{field:r}=e;return t.$$set=l=>{"field"in l&&n(0,r=l.field)},[r]}class go extends P{constructor(e){super(),L(this,e,ho,bo,A,{field:0})}}function Ft(t,e,n){const r=t.slice();return r[17]=e[n],r}function qt(t){let e,n,r=G(t[1].fields),l=[];for(let s=0;s<r.length;s+=1)l[s]=It(Ft(t,r,s));const o=s=>y(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=K()},m(s,a){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,a);b(s,e,a),n=!0},p(s,a){if(a&2){r=G(s[1].fields);let i;for(i=0;i<r.length;i+=1){const c=Ft(s,r,i);l[i]?(l[i].p(c,a),$(l[i],1)):(l[i]=It(c),l[i].c(),$(l[i],1),l[i].m(e.parentNode,e))}for(W(),i=r.length;i<l.length;i+=1)o(i);H()}},i(s){if(!n){for(let a=0;a<r.length;a+=1)$(l[a]);n=!0}},o(s){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)y(l[a]);n=!1},d(s){s&&_(e),x(l,s)}}}function It(t){let e,n;return e=new go({props:{field:t[17]}}),{c(){D(e.$$.fragment)},m(r,l){S(e,r,l),n=!0},p(r,l){const o={};l&2&&(o.field=r[17]),e.$set(o)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){y(e.$$.fragment,r),n=!1},d(r){C(e,r)}}}function $o(t){let e,n,r,l=!t[5]&&yo(t);return{c(){e=h("button"),e.textContent="Submit",n=E(),l&&l.c(),r=K(),m(e,"class","btn-base"),m(e,"type","submit")},m(o,s){b(o,e,s),b(o,n,s),l&&l.m(o,s),b(o,r,s)},p(o,s){o[5]||l.p(o,s)},d(o){o&&(_(e),_(n),_(r)),l&&l.d(o)}}}function wo(t){let e,n,r;return{c(){e=h("button"),e.textContent="Edit",m(e,"class","btn-base"),m(e,"type","button")},m(l,o){b(l,e,o),n||(r=M(e,"click",t[9]),n=!0)},p:R,d(l){l&&_(e),n=!1,r()}}}function yo(t){let e,n,r;return{c(){e=h("button"),e.textContent="Cancel",m(e,"class","btn-base"),m(e,"type","button")},m(l,o){b(l,e,o),n||(r=M(e,"click",t[10]),n=!0)},p:R,d(l){l&&_(e),n=!1,r()}}}function ko(t){let e,n,r,l;function o(i,c){return i[0]?wo:$o}let s=o(t),a=s(t);return{c(){a.c(),e=E(),n=h("button"),n.textContent="Definitions",m(n,"class","btn-base"),m(n,"type","button")},m(i,c){a.m(i,c),b(i,e,c),b(i,n,c),r||(l=M(n,"click",t[11]),r=!0)},p(i,c){s===(s=o(i))&&a?a.p(i,c):(a.d(1),a=s(i),a&&(a.c(),a.m(e.parentNode,e)))},d(i){i&&(_(e),_(n)),a.d(i),r=!1,l()}}}function vo(t){var a;let e,n,r,l,o;e=new Ee({props:{fields:t[6],data:t[4],formErrors:t[3],disabled:t[0]}});let s=((a=t[1])==null?void 0:a.fields)&&qt(t);return l=new Y({props:{$$slots:{default:[ko]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment),n=E(),s&&s.c(),r=E(),D(l.$$.fragment)},m(i,c){S(e,i,c),b(i,n,c),s&&s.m(i,c),b(i,r,c),S(l,i,c),o=!0},p(i,c){var d;const f={};c&16&&(f.data=i[4]),c&8&&(f.formErrors=i[3]),c&1&&(f.disabled=i[0]),e.$set(f),(d=i[1])!=null&&d.fields?s?(s.p(i,c),c&2&&$(s,1)):(s=qt(i),s.c(),$(s,1),s.m(r.parentNode,r)):s&&(W(),y(s,1,1,()=>{s=null}),H());const u={};c&1048577&&(u.$$scope={dirty:c,ctx:i}),l.$set(u)},i(i){o||($(e.$$.fragment,i),$(s),$(l.$$.fragment,i),o=!0)},o(i){y(e.$$.fragment,i),y(s),y(l.$$.fragment,i),o=!1},d(i){i&&(_(n),_(r)),C(e,i),s&&s.d(i),C(l,i)}}}function Eo(t){let e,n,r,l,o,s,a;return e=new an({props:{show:!t[5],entry:t[1],commit:t[2]}}),l=new le({props:{$$slots:{default:[vo]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment),n=E(),r=h("form"),D(l.$$.fragment)},m(i,c){S(e,i,c),b(i,n,c),b(i,r,c),S(l,r,null),o=!0,s||(a=M(r,"submit",we(t[7])),s=!0)},p(i,c){const f={};c&2&&(f.entry=i[1]),c&4&&(f.commit=i[2]),e.$set(f);const u={};c&1048603&&(u.$$scope={dirty:c,ctx:i}),l.$set(u)},i(i){o||($(e.$$.fragment,i),$(l.$$.fragment,i),o=!0)},o(i){y(e.$$.fragment,i),y(l.$$.fragment,i),o=!1},d(i){i&&(_(n),_(r)),C(e,i),C(l),s=!1,a()}}}function So(t){let e,n;return e=new me({props:{label:"Create new Definition",$$slots:{default:[Eo]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},m(r,l){S(e,r,l),n=!0},p(r,[l]){const o={};l&1048607&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){y(e.$$.fragment,r),n=!1},d(r){C(e,r)}}}function Co(t,e,n){let r,l;Z(t,z,k=>n(12,r=k)),Z(t,Vt,k=>n(13,l=k));let{params:o={definition:""}}=e,s=l.endsWith("/definitions/create"),a=!s,i,c,f=cn(s),{formErrors:u,formValidate:d}=ke(f),g={};const w=async k=>{try{const q=await Bl(r,k.tc_id,c,k,s);return n(2,c=q.commit),n(1,i=q.data),!0}catch(q){J.set(X(q))}return!1},F=async k=>{try{const q=new FormData(k.target);if(!Kt(f,q,g)){J.set("The item did not changed!");return}if(!d(q)){n(3,u);return}const v=_o(i,s,q);if(!await w(v))return;if(s){Q("#/definitions");return}n(0,a=!0)}catch(q){J.set(X(q))}},j=()=>{n(1,i={tc_id:"",tc_title:"",tc_modified:0,fields:[]})};ye(async()=>{try{if(s)j(),n(2,c=await Be(r));else{const k=await ln(r,o.definition);n(1,i=k.data),n(2,c=k.commit)}n(4,g=po(s,i,g))}catch(k){J.set(X(k))}});const N=()=>n(0,a=!1),B=()=>n(0,a=!0),T=()=>Q("#/definitions");return t.$$set=k=>{"params"in k&&n(8,o=k.params)},[a,i,c,u,g,s,f,F,o,N,B,T]}class Ot extends P{constructor(e){super(),L(this,e,Co,So,A,{params:8})}}function Nt(t){let e,n;return e=new on({props:{title:"Errors",desc:t[0],buttons:t[3],type:"error"}}),{c(){D(e.$$.fragment)},m(r,l){S(e,r,l),n=!0},p(r,l){const o={};l&1&&(o.desc=r[0]),e.$set(o)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){y(e.$$.fragment,r),n=!1},d(r){C(e,r)}}}function Do(t){let e,n,r,l,o,s,a,i;n=new il({props:{entries:t[2]}});let c=t[0]!==""&&Nt(t);return a=new In({props:{routes:t[1]}}),{c(){e=h("div"),D(n.$$.fragment),r=E(),l=h("div"),o=h("div"),c&&c.c(),s=E(),D(a.$$.fragment),m(o,"class","w-full"),m(l,"class","col-span-4 p-8 h-screen"),m(e,"class","grid grid-cols-5")},m(f,u){b(f,e,u),S(n,e,null),p(e,r),p(e,l),p(l,o),c&&c.m(o,null),p(o,s),S(a,o,null),i=!0},p(f,u){f[0]!==""?c?(c.p(f,u),u&1&&$(c,1)):(c=Nt(f),c.c(),$(c,1),c.m(o,s)):c&&(W(),y(c,1,1,()=>{c=null}),H())},i(f){i||($(n.$$.fragment,f),$(c),$(a.$$.fragment,f),i=!0)},o(f){y(n.$$.fragment,f),y(c),y(a.$$.fragment,f),i=!1},d(f){f&&_(e),C(n),c&&c.d(),C(a)}}}function Fo(t){let e,n,r;return n=new Jr({props:{$$slots:{default:[Do]},$$scope:{ctx:t}}}),{c(){e=h("main"),D(n.$$.fragment),m(e,"class","text-gray-600 max-w-screen-xl m-auto")},m(l,o){b(l,e,o),S(n,e,null),r=!0},p(l,[o]){const s={};o&17&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){r||($(n.$$.fragment,l),r=!0)},o(l){y(n.$$.fragment,l),r=!1},d(l){l&&_(e),C(n)}}}function qo(t,e,n){let r;return Z(t,J,a=>n(0,r=a)),[r,{"/":Zr,"/about":nl,"/definitions":Zl,"/definitions/create":Ot,"/definitions/definition/:definition":Ot,"/collection/:collection":Jl,"/collection/:collection/create":wt,"/collection/:collection/item/:item":wt,"*":ll},[{label:"Home",path:"#/"},{label:"About",path:"#/about"},{label:"Definitions",path:"#/definitions"}],[{label:"OK",onclick:()=>{J.set("")}}]]}class Io extends P{constructor(e){super(),L(this,e,qo,Fo,A,{})}}new Io({target:document.getElementById("app")||document.body});
