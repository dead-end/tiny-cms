var Lt=Object.defineProperty;var Tt=(t,e,n)=>e in t?Lt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var qe=(t,e,n)=>(Tt(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function j(){}function ye(t,e){for(const n in e)t[n]=e[n];return t}function pt(t){return t()}function Ke(){return Object.create(null)}function ne(t){t.forEach(pt)}function ve(t){return typeof t=="function"}function P(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Pt(t){return Object.keys(t).length===0}function ht(t,...e){if(t==null){for(const r of e)r(void 0);return j}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function te(t,e,n){t.$$.on_destroy.push(ht(e,n))}function fe(t,e,n,r){if(t){const o=_t(t,e,n,r);return t[0](o)}}function _t(t,e,n,r){return t[1]&&r?ye(n.ctx.slice(),t[1](r(e))):n.ctx}function de(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const l=[],s=Math.max(e.dirty.length,o.length);for(let i=0;i<s;i+=1)l[i]=e.dirty[i]|o[i];return l}return e.dirty|o}return e.dirty}function me(t,e,n,r,o,l){if(o){const s=_t(e,n,r,l);t.p(s,o)}}function pe(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function m(t,e){t.appendChild(e)}function g(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode&&t.parentNode.removeChild(t)}function ge(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function h(t){return document.createElement(t)}function F(t){return document.createTextNode(t)}function E(){return F(" ")}function Y(){return F("")}function G(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function Ae(t){return function(e){return e.preventDefault(),t.call(this,e)}}function p(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Mt(t){return Array.from(t.childNodes)}function V(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ut(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function ce(t,e){return new t(e)}let _e;function he(t){_e=t}function ke(){if(!_e)throw new Error("Function called outside component initialization");return _e}function Ee(t){ke().$$.on_mount.push(t)}function Vt(t){ke().$$.after_update.push(t)}function Gt(t){ke().$$.on_destroy.push(t)}function Kt(){const t=ke();return(e,n,{cancelable:r=!1}={})=>{const o=t.$$.callbacks[e];if(o){const l=Ut(e,n,{cancelable:r});return o.slice().forEach(s=>{s.call(t,l)}),!l.defaultPrevented}return!0}}function He(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const ie=[],Je=[];let ae=[];const We=[],bt=Promise.resolve();let Be=!1;function gt(){Be||(Be=!0,bt.then($t))}function Le(){return gt(),bt}function Re(t){ae.push(t)}const De=new Set;let le=0;function $t(){if(le!==0)return;const t=_e;do{try{for(;le<ie.length;){const e=ie[le];le++,he(e),Ht(e.$$)}}catch(e){throw ie.length=0,le=0,e}for(he(null),ie.length=0,le=0;Je.length;)Je.pop()();for(let e=0;e<ae.length;e+=1){const n=ae[e];De.has(n)||(De.add(n),n())}ae.length=0}while(ie.length);for(;We.length;)We.pop()();Be=!1,De.clear(),he(t)}function Ht(t){if(t.fragment!==null){t.update(),ne(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Re)}}function Jt(t){const e=[],n=[];ae.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),ae=e}const $e=new Set;let ee;function H(){ee={r:0,c:[],p:ee}}function J(){ee.r||ne(ee.c),ee=ee.p}function $(t,e){t&&t.i&&($e.delete(t),t.i(e))}function w(t,e,n,r){if(t&&t.o){if($e.has(t))return;$e.add(t),ee.c.push(()=>{$e.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function x(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ue(t,e){const n={},r={},o={$$scope:1};let l=t.length;for(;l--;){const s=t[l],i=e[l];if(i){for(const a in s)a in i||(r[a]=1);for(const a in i)o[a]||(n[a]=i[a],o[a]=1);t[l]=i}else for(const a in s)o[a]=1}for(const s in r)s in n||(n[s]=void 0);return n}function Q(t){return typeof t=="object"&&t!==null?t:{}}function D(t){t&&t.c()}function I(t,e,n){const{fragment:r,after_update:o}=t.$$;r&&r.m(e,n),Re(()=>{const l=t.$$.on_mount.map(pt).filter(ve);t.$$.on_destroy?t.$$.on_destroy.push(...l):ne(l),t.$$.on_mount=[]}),o.forEach(Re)}function q(t,e){const n=t.$$;n.fragment!==null&&(Jt(n.after_update),ne(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Wt(t,e){t.$$.dirty[0]===-1&&(ie.push(t),gt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function M(t,e,n,r,o,l,s=null,i=[-1]){const a=_e;he(t);const c=t.$$={fragment:null,ctx:[],props:l,update:j,not_equal:o,bound:Ke(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Ke(),dirty:i,skip_bound:!1,root:e.target||a.$$.root};s&&s(c.root);let u=!1;if(c.ctx=n?n(t,e.props||{},(f,d,...y)=>{const _=y.length?y[0]:d;return c.ctx&&o(c.ctx[f],c.ctx[f]=_)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](_),u&&Wt(t,f)),d}):[],c.update(),u=!0,ne(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const f=Mt(e.target);c.fragment&&c.fragment.l(f),f.forEach(b)}else c.fragment&&c.fragment.c();e.intro&&$(t.$$.fragment),I(t,e.target,e.anchor),$t()}he(a)}class U{constructor(){qe(this,"$$");qe(this,"$$set")}$destroy(){q(this,1),this.$destroy=j}$on(e,n){if(!ve(n))return j;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!Pt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const xt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(xt);const se=[];function wt(t,e){return{subscribe:Se(t,e).subscribe}}function Se(t,e=j){let n;const r=new Set;function o(i){if(P(t,i)&&(t=i,n)){const a=!se.length;for(const c of r)c[1](),se.push(c,t);if(a){for(let c=0;c<se.length;c+=2)se[c][0](se[c+1]);se.length=0}}}function l(i){o(i(t))}function s(i,a=j){const c=[i,a];return r.add(c),r.size===1&&(n=e(o,l)||j),i(t),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:o,update:l,subscribe:s}}function yt(t,e,n){const r=!Array.isArray(t),o=r?[t]:t;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const l=e.length<2;return wt(n,(s,i)=>{let a=!1;const c=[];let u=0,f=j;const d=()=>{if(u)return;f();const _=e(r?c[0]:c,s,i);l?s(_):f=ve(_)?_:j},y=o.map((_,v)=>ht(_,N=>{c[v]=N,u&=~(1<<v),a&&d()},()=>{u|=1<<v}));return a=!0,d(),function(){ne(y),f(),a=!1}})}function Xt(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,o,l,s=[],i="",a=t.split("/");for(a[0]||a.shift();o=a.shift();)n=o[0],n==="*"?(s.push("wild"),i+="/(.*)"):n===":"?(r=o.indexOf("?",1),l=o.indexOf(".",1),s.push(o.substring(1,~r?r:~l?l:o.length)),i+=~r&&!~l?"(?:/([^/]+?))?":"/([^/]+?)",~l&&(i+=(~r?"?":"")+"\\"+o.substring(l))):i+="/"+o;return{keys:s,pattern:new RegExp("^"+i+(e?"(?=$|/)":"/?$"),"i")}}function Yt(t){let e,n,r;const o=[t[2]];var l=t[0];function s(i,a){let c={};if(a!==void 0&&a&4)c=ue(o,[Q(i[2])]);else for(let u=0;u<o.length;u+=1)c=ye(c,o[u]);return{props:c}}return l&&(e=ce(l,s(t)),e.$on("routeEvent",t[7])),{c(){e&&D(e.$$.fragment),n=Y()},m(i,a){e&&I(e,i,a),g(i,n,a),r=!0},p(i,a){if(a&1&&l!==(l=i[0])){if(e){H();const c=e;w(c.$$.fragment,1,0,()=>{q(c,1)}),J()}l?(e=ce(l,s(i,a)),e.$on("routeEvent",i[7]),D(e.$$.fragment),$(e.$$.fragment,1),I(e,n.parentNode,n)):e=null}else if(l){const c=a&4?ue(o,[Q(i[2])]):{};e.$set(c)}},i(i){r||(e&&$(e.$$.fragment,i),r=!0)},o(i){e&&w(e.$$.fragment,i),r=!1},d(i){i&&b(n),e&&q(e,i)}}}function zt(t){let e,n,r;const o=[{params:t[1]},t[2]];var l=t[0];function s(i,a){let c={};if(a!==void 0&&a&6)c=ue(o,[a&2&&{params:i[1]},a&4&&Q(i[2])]);else for(let u=0;u<o.length;u+=1)c=ye(c,o[u]);return{props:c}}return l&&(e=ce(l,s(t)),e.$on("routeEvent",t[6])),{c(){e&&D(e.$$.fragment),n=Y()},m(i,a){e&&I(e,i,a),g(i,n,a),r=!0},p(i,a){if(a&1&&l!==(l=i[0])){if(e){H();const c=e;w(c.$$.fragment,1,0,()=>{q(c,1)}),J()}l?(e=ce(l,s(i,a)),e.$on("routeEvent",i[6]),D(e.$$.fragment),$(e.$$.fragment,1),I(e,n.parentNode,n)):e=null}else if(l){const c=a&6?ue(o,[a&2&&{params:i[1]},a&4&&Q(i[2])]):{};e.$set(c)}},i(i){r||(e&&$(e.$$.fragment,i),r=!0)},o(i){e&&w(e.$$.fragment,i),r=!1},d(i){i&&b(n),e&&q(e,i)}}}function Qt(t){let e,n,r,o;const l=[zt,Yt],s=[];function i(a,c){return a[1]?0:1}return e=i(t),n=s[e]=l[e](t),{c(){n.c(),r=Y()},m(a,c){s[e].m(a,c),g(a,r,c),o=!0},p(a,[c]){let u=e;e=i(a),e===u?s[e].p(a,c):(H(),w(s[u],1,1,()=>{s[u]=null}),J(),n=s[e],n?n.p(a,c):(n=s[e]=l[e](a),n.c()),$(n,1),n.m(r.parentNode,r))},i(a){o||($(n),o=!0)},o(a){w(n),o=!1},d(a){a&&b(r),s[e].d(a)}}}function xe(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let r="";return n>-1&&(r=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:r}}const Te=wt(null,function(e){e(xe());const n=()=>{e(xe())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}}),Zt=yt(Te,t=>t.location);yt(Te,t=>t.querystring);const Xe=Se(void 0);async function be(t){if(!t||t.length<1||t.charAt(0)!="/"&&t.indexOf("#/")!==0)throw Error("Invalid parameter location");await Le(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=(t.charAt(0)=="#"?"":"#")+t}async function en(t){if(!t||t.length<1||t.charAt(0)!="/"&&t.indexOf("#/")!==0)throw Error("Invalid parameter location");await Le();const e=(t.charAt(0)=="#"?"":"#")+t;try{const n={...history.state};delete n.__svelte_spa_router_scrollX,delete n.__svelte_spa_router_scrollY,window.history.replaceState(n,void 0,e)}catch{console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function tn(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function nn(t,e,n){let{routes:r={}}=e,{prefix:o=""}=e,{restoreScrollState:l=!1}=e;class s{constructor(C,S){if(!S||typeof S!="function"&&(typeof S!="object"||S._sveltesparouter!==!0))throw Error("Invalid component object");if(!C||typeof C=="string"&&(C.length<1||C.charAt(0)!="/"&&C.charAt(0)!="*")||typeof C=="object"&&!(C instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:T,keys:L}=Xt(C);this.path=C,typeof S=="object"&&S._sveltesparouter===!0?(this.component=S.component,this.conditions=S.conditions||[],this.userData=S.userData,this.props=S.props||{}):(this.component=()=>Promise.resolve(S),this.conditions=[],this.props={}),this._pattern=T,this._keys=L}match(C){if(o){if(typeof o=="string")if(C.startsWith(o))C=C.substr(o.length)||"/";else return null;else if(o instanceof RegExp){const O=C.match(o);if(O&&O[0])C=C.substr(O[0].length)||"/";else return null}}const S=this._pattern.exec(C);if(S===null)return null;if(this._keys===!1)return S;const T={};let L=0;for(;L<this._keys.length;){try{T[this._keys[L]]=decodeURIComponent(S[L+1]||"")||null}catch{T[this._keys[L]]=null}L++}return T}async checkConditions(C){for(let S=0;S<this.conditions.length;S++)if(!await this.conditions[S](C))return!1;return!0}}const i=[];r instanceof Map?r.forEach((k,C)=>{i.push(new s(C,k))}):Object.keys(r).forEach(k=>{i.push(new s(k,r[k]))});let a=null,c=null,u={};const f=Kt();async function d(k,C){await Le(),f(k,C)}let y=null,_=null;l&&(_=k=>{k.state&&(k.state.__svelte_spa_router_scrollY||k.state.__svelte_spa_router_scrollX)?y=k.state:y=null},window.addEventListener("popstate",_),Vt(()=>{tn(y)}));let v=null,N=null;const B=Te.subscribe(async k=>{v=k;let C=0;for(;C<i.length;){const S=i[C].match(k.location);if(!S){C++;continue}const T={route:i[C].path,location:k.location,querystring:k.querystring,userData:i[C].userData,params:S&&typeof S=="object"&&Object.keys(S).length?S:null};if(!await i[C].checkConditions(T)){n(0,a=null),N=null,d("conditionsFailed",T);return}d("routeLoading",Object.assign({},T));const L=i[C].component;if(N!=L){L.loading?(n(0,a=L.loading),N=L,n(1,c=L.loadingParams),n(2,u={}),d("routeLoaded",Object.assign({},T,{component:a,name:a.name,params:c}))):(n(0,a=null),N=null);const O=await L();if(k!=v)return;n(0,a=O&&O.default||O),N=L}S&&typeof S=="object"&&Object.keys(S).length?n(1,c=S):n(1,c=null),n(2,u=i[C].props),d("routeLoaded",Object.assign({},T,{component:a,name:a.name,params:c})).then(()=>{Xe.set(c)});return}n(0,a=null),N=null,Xe.set(void 0)});Gt(()=>{B(),_&&window.removeEventListener("popstate",_)});function R(k){He.call(this,t,k)}function A(k){He.call(this,t,k)}return t.$$set=k=>{"routes"in k&&n(3,r=k.routes),"prefix"in k&&n(4,o=k.prefix),"restoreScrollState"in k&&n(5,l=k.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=l?"manual":"auto")},[a,c,u,r,o,l,R,A]}class rn extends U{constructor(e){super(),M(this,e,nn,Qt,P,{routes:3,prefix:4,restoreScrollState:5})}}const Ne=t=>btoa(String.fromCharCode(...new Uint8Array(t))),Fe=t=>Uint8Array.from(atob(t),e=>e.charCodeAt(0)).buffer,Oe=t=>typeof t>"u"?"":t,z=t=>t instanceof Error?t.message:JSON.stringify(t),on=(t,e)=>{const n=localStorage.getItem(t);if(n){const l=Fe(n);return new Uint8Array(l)}const r=crypto.getRandomValues(new Uint8Array(e)),o=Ne(r.buffer);return localStorage.setItem(t,o),r},vt=()=>on("salt",12),ln=()=>crypto.getRandomValues(new Uint8Array(12)),kt=async(t,e)=>{const n=await crypto.subtle.importKey("raw",new TextEncoder().encode(t),"PBKDF2",!1,["deriveKey"]);return await crypto.subtle.deriveKey({name:"PBKDF2",salt:e,iterations:25e4,hash:"SHA-256"},n,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])},sn=async(t,e,n)=>await crypto.subtle.encrypt({name:"AES-GCM",iv:e},t,new TextEncoder().encode(n)),an=async(t,e,n)=>{const r=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:e},t,n);return new TextDecoder().decode(r)},cn=async(t,e)=>{const n=ln(),r=await kt(e,vt()),o=await sn(r,n,t),l=Ne(o);return Ne(n.buffer)+"#"+l},un=async(t,e)=>{const[n,r]=t.split("#"),o=Fe(n),l=Fe(r),s=new Uint8Array(o),i=await kt(e,vt());return await an(i,s,l)},je={owner:"",name:"",branch:"main",prefix:"",token:""},Pe="github-repo",Ye=async t=>{const e=localStorage.getItem(Pe);if(!e){if(t)throw new Error("Github repository data not found!");return je}let n=JSON.parse(e);return n.token=t?await un(n.token,t):"",n},fn=async(t,e)=>{const n={owner:t.owner,name:t.name,branch:t.branch,prefix:t.prefix,token:await cn(t.token,e)};return localStorage.setItem(Pe,JSON.stringify(n)),t},dn=()=>{localStorage.removeItem(Pe)},mn=()=>{const t=Se(je);return{subscribe:t.subscribe,initRepoConfig:async()=>{t.set(await Ye())},login:async e=>{t.set(await Ye(e))},logout:()=>{t.update(e=>(e.token="",e))},saveRepoConfig:async(e,n)=>{e=await fn(e,n),t.set(e)},reset:()=>{dn(),t.set(je)}}},X=mn(),ze=(t,e,n)=>{const r=t.get(e);if(!r)throw new Error(n);return r},Z=t=>{if(t===null||typeof t!="string")throw Error(`Invalid value: ${t}`);return t.trim()},pn=()=>t=>{if(!t)return"Please enter a value!"},hn=t=>{if(!t||typeof t.min!="number")throw new Error('Validator: "min" required numeric property!');return e=>{if(e!==""){if(t.type&&t.type==="number"){if(Number(e)<t.min)return`The minumum value is: ${t.min}`}else if(e.length<t.min)return`The minumum length is: ${t.min}`}}},_n=t=>{if(!t||typeof t.max!="number")throw new Error('Validator: "max" required numeric property!');return e=>{if(e!==""){if(t.type&&t.type==="number"){if(Number(e)>t.max)return`The maximum value is: ${t.max}`}else if(e.length>t.max)return`The maximum length is: ${t.max}`}}},bn=t=>{if(!t||!t.regex)throw new Error('Validator: "validateRegex" requires a "regex" property!');const e=new RegExp(t.regex);return n=>{if(n!==""&&!e.test(n))return`Value does not match ${t.regex}`}},gn=t=>{if(!t||!t.field||!t.msg)throw new Error('Validator: "fieldEquals" requires a "field" and a "msg" property!');return(e,n)=>{if(e!==n.get(t.field))return t.msg}},$n={required:pn,min:hn,max:_n,regex:bn,fieldEquals:gn},Me=t=>{let e=new Map,n=new Map;const r=(s,i,a)=>{n.set(i,"");for(const c of a){const u=c(s.get(i),s);if(u)return n.set(i,u),console.log("Form Error:",u),!1}return!0},o=s=>{let i=!0;return e.forEach((a,c)=>{r(s,c,a)||(i=!1)}),i},l=s=>(s.forEach(i=>{const a=[];i.validators.forEach(c=>{a.push($n[c.validator](c.props))}),e.set(i.id,a)}),s);return t&&l(t),{formErrors:n,formValidate:o,formFieldsUpdate:l}},wn=(t,e,n)=>{for(const r of t)if(n[r.id]!==e.get(r.id))return!0;return!1};function yn(t){let e,n,r,o,l;const s=t[2].default,i=fe(s,t,t[1],null);return{c(){e=h("div"),n=h("h3"),r=F(t[0]),o=E(),i&&i.c(),p(n,"class","text-lg pb-2 my-6 border-b"),p(e,"class","bg-white p-6 rounded-md shadow")},m(a,c){g(a,e,c),m(e,n),m(n,r),m(e,o),i&&i.m(e,null),l=!0},p(a,[c]){(!l||c&1)&&V(r,a[0]),i&&i.p&&(!l||c&2)&&me(i,s,a,a[1],l?de(s,a[1],c,null):pe(a[1]),null)},i(a){l||($(i,a),l=!0)},o(a){w(i,a),l=!1},d(a){a&&b(e),i&&i.d(a)}}}function vn(t,e,n){let{$$slots:r={},$$scope:o}=e,{label:l}=e;return t.$$set=s=>{"label"in s&&n(0,l=s.label),"$$scope"in s&&n(1,o=s.$$scope)},[l,o,r]}class Ce extends U{constructor(e){super(),M(this,e,vn,yn,P,{label:0})}}function Qe(t){let e,n;return{c(){e=h("p"),n=F(t[2]),p(e,"class","text-xs text-red-600 pt-2")},m(r,o){g(r,e,o),m(e,n)},p(r,o){o&4&&V(n,r[2])},d(r){r&&b(e)}}}function kn(t){let e,n,r,o,l,s;const i=t[4].default,a=fe(i,t,t[3],null);let c=t[2]&&Qe(t);return{c(){e=h("div"),n=h("label"),r=F(t[1]),o=E(),a&&a.c(),l=E(),c&&c.c(),p(n,"for",t[0]),p(n,"class","label-base mb-2")},m(u,f){g(u,e,f),m(e,n),m(n,r),m(e,o),a&&a.m(e,null),m(e,l),c&&c.m(e,null),s=!0},p(u,[f]){(!s||f&2)&&V(r,u[1]),(!s||f&1)&&p(n,"for",u[0]),a&&a.p&&(!s||f&8)&&me(a,i,u,u[3],s?de(i,u[3],f,null):pe(u[3]),null),u[2]?c?c.p(u,f):(c=Qe(u),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(u){s||($(a,u),s=!0)},o(u){w(a,u),s=!1},d(u){u&&b(e),a&&a.d(u),c&&c.d()}}}function En(t,e,n){let{$$slots:r={},$$scope:o}=e,{id:l}=e,{label:s}=e,{error:i}=e;return t.$$set=a=>{"id"in a&&n(0,l=a.id),"label"in a&&n(1,s=a.label),"error"in a&&n(2,i=a.error),"$$scope"in a&&n(3,o=a.$$scope)},[l,s,i,o,r]}class Et extends U{constructor(e){super(),M(this,e,En,kn,P,{id:0,label:1,error:2})}}function Sn(t){let e,n,r;return{c(){e=h("textarea"),p(e,"id",t[1]),p(e,"name",t[1]),p(e,"class","input-base"),e.value=t[3],e.disabled=t[4]},m(o,l){g(o,e,l),n||(r=G(e,"blur",t[5]),n=!0)},p(o,l){l&2&&p(e,"id",o[1]),l&2&&p(e,"name",o[1]),l&8&&(e.value=o[3]),l&16&&(e.disabled=o[4])},d(o){o&&b(e),n=!1,r()}}}function Cn(t){let e,n;return e=new Et({props:{id:t[1],label:t[2],error:t[0],$$slots:{default:[Sn]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},m(r,o){I(e,r,o),n=!0},p(r,[o]){const l={};o&2&&(l.id=r[1]),o&4&&(l.label=r[2]),o&1&&(l.error=r[0]),o&90&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function In(t,e,n){let{id:r}=e,{label:o}=e,{value:l}=e,{error:s}=e,{disabled:i=!1}=e;const a=()=>{s&&n(0,s="")};return t.$$set=c=>{"id"in c&&n(1,r=c.id),"label"in c&&n(2,o=c.label),"value"in c&&n(3,l=c.value),"error"in c&&n(0,s=c.error),"disabled"in c&&n(4,i=c.disabled)},[s,r,o,l,i,a]}class qn extends U{constructor(e){super(),M(this,e,In,Cn,P,{id:1,label:2,value:3,error:0,disabled:4})}}function Dn(t){let e,n,r;return{c(){e=h("input"),p(e,"id",t[1]),p(e,"name",t[1]),p(e,"class","input-base"),p(e,"type",t[5]),e.value=t[3],e.disabled=t[4]},m(o,l){g(o,e,l),n||(r=G(e,"blur",t[6]),n=!0)},p(o,l){l&2&&p(e,"id",o[1]),l&2&&p(e,"name",o[1]),l&32&&p(e,"type",o[5]),l&8&&e.value!==o[3]&&(e.value=o[3]),l&16&&(e.disabled=o[4])},d(o){o&&b(e),n=!1,r()}}}function On(t){let e,n;return e=new Et({props:{id:t[1],label:t[2],error:t[0],$$slots:{default:[Dn]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},m(r,o){I(e,r,o),n=!0},p(r,[o]){const l={};o&2&&(l.id=r[1]),o&4&&(l.label=r[2]),o&1&&(l.error=r[0]),o&186&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function Bn(t,e,n){let{id:r}=e,{label:o}=e,{value:l}=e,{error:s}=e,{disabled:i=!1}=e,{type:a="text"}=e;const c=()=>{s&&n(0,s="")};return t.$$set=u=>{"id"in u&&n(1,r=u.id),"label"in u&&n(2,o=u.label),"value"in u&&n(3,l=u.value),"error"in u&&n(0,s=u.error),"disabled"in u&&n(4,i=u.disabled),"type"in u&&n(5,a=u.type)},[s,r,o,l,i,a,c]}class Rn extends U{constructor(e){super(),M(this,e,Bn,On,P,{id:1,label:2,value:3,error:0,disabled:4,type:5})}}const Ze={text:Rn,area:qn};function Nn(t){let e,n,r;const o=[{id:t[0].id},{label:t[0].label},{value:Oe(t[1][t[0].id])},{error:t[2].get(t[0].id)},t[4],{disabled:t[3]},t[0].props];var l=Ze[t[0].component];function s(i,a){let c={};if(a!==void 0&&a&31)c=ue(o,[a&1&&{id:i[0].id},a&1&&{label:i[0].label},a&3&&{value:Oe(i[1][i[0].id])},a&5&&{error:i[2].get(i[0].id)},a&16&&Q(i[4]),a&8&&{disabled:i[3]},a&1&&Q(i[0].props)]);else for(let u=0;u<o.length;u+=1)c=ye(c,o[u]);return{props:c}}return l&&(e=ce(l,s(t))),{c(){e&&D(e.$$.fragment),n=Y()},m(i,a){e&&I(e,i,a),g(i,n,a),r=!0},p(i,[a]){if(a&1&&l!==(l=Ze[i[0].component])){if(e){H();const c=e;w(c.$$.fragment,1,0,()=>{q(c,1)}),J()}l?(e=ce(l,s(i,a)),D(e.$$.fragment),$(e.$$.fragment,1),I(e,n.parentNode,n)):e=null}else if(l){const c=a&31?ue(o,[a&1&&{id:i[0].id},a&1&&{label:i[0].label},a&3&&{value:Oe(i[1][i[0].id])},a&5&&{error:i[2].get(i[0].id)},a&16&&Q(i[4]),a&8&&{disabled:i[3]},a&1&&Q(i[0].props)]):{};e.$set(c)}},i(i){r||(e&&$(e.$$.fragment,i),r=!0)},o(i){e&&w(e.$$.fragment,i),r=!1},d(i){i&&b(n),e&&q(e,i)}}}function Fn(t,e,n){let{field:r}=e,{data:o}=e,{formErrors:l}=e,{disabled:s}=e,i=r.type?{type:r.type}:{};return t.$$set=a=>{"field"in a&&n(0,r=a.field),"data"in a&&n(1,o=a.data),"formErrors"in a&&n(2,l=a.formErrors),"disabled"in a&&n(3,s=a.disabled)},[r,o,l,s,i]}class jn extends U{constructor(e){super(),M(this,e,Fn,Nn,P,{field:0,data:1,formErrors:2,disabled:3})}}function et(t,e,n){const r=t.slice();return r[4]=e[n],r}function tt(t){let e,n;return e=new jn({props:{field:t[4],data:t[1],formErrors:t[2],disabled:t[3]}}),{c(){D(e.$$.fragment)},m(r,o){I(e,r,o),n=!0},p(r,o){const l={};o&1&&(l.field=r[4]),o&2&&(l.data=r[1]),o&4&&(l.formErrors=r[2]),o&8&&(l.disabled=r[3]),e.$set(l)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function An(t){let e,n,r=x(t[0]),o=[];for(let s=0;s<r.length;s+=1)o[s]=tt(et(t,r,s));const l=s=>w(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=Y()},m(s,i){for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(s,i);g(s,e,i),n=!0},p(s,[i]){if(i&15){r=x(s[0]);let a;for(a=0;a<r.length;a+=1){const c=et(s,r,a);o[a]?(o[a].p(c,i),$(o[a],1)):(o[a]=tt(c),o[a].c(),$(o[a],1),o[a].m(e.parentNode,e))}for(H(),a=r.length;a<o.length;a+=1)l(a);J()}},i(s){if(!n){for(let i=0;i<r.length;i+=1)$(o[i]);n=!0}},o(s){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)w(o[i]);n=!1},d(s){s&&b(e),ge(o,s)}}}function Ln(t,e,n){let{fields:r}=e,{data:o}=e,{formErrors:l}=e,{disabled:s}=e;return t.$$set=i=>{"fields"in i&&n(0,r=i.fields),"data"in i&&n(1,o=i.data),"formErrors"in i&&n(2,l=i.formErrors),"disabled"in i&&n(3,s=i.disabled)},[r,o,l,s]}class Ue extends U{constructor(e){super(),M(this,e,Ln,An,P,{fields:0,data:1,formErrors:2,disabled:3})}}function Tn(t){let e,n;const r=t[1].default,o=fe(r,t,t[0],null);return{c(){e=h("div"),o&&o.c(),p(e,"class","flex gap-4")},m(l,s){g(l,e,s),o&&o.m(e,null),n=!0},p(l,[s]){o&&o.p&&(!n||s&1)&&me(o,r,l,l[0],n?de(r,l[0],s,null):pe(l[0]),null)},i(l){n||($(o,l),n=!0)},o(l){w(o,l),n=!1},d(l){l&&b(e),o&&o.d(l)}}}function Pn(t,e,n){let{$$slots:r={},$$scope:o}=e;return t.$$set=l=>{"$$scope"in l&&n(0,o=l.$$scope)},[o,r]}class re extends U{constructor(e){super(),M(this,e,Pn,Tn,P,{})}}function Mn(t){let e,n;const r=t[1].default,o=fe(r,t,t[0],null);return{c(){e=h("div"),o&&o.c(),p(e,"class","flex flex-col gap-4")},m(l,s){g(l,e,s),o&&o.m(e,null),n=!0},p(l,[s]){o&&o.p&&(!n||s&1)&&me(o,r,l,l[0],n?de(r,l[0],s,null):pe(l[0]),null)},i(l){n||($(o,l),n=!0)},o(l){w(o,l),n=!1},d(l){l&&b(e),o&&o.d(l)}}}function Un(t,e,n){let{$$slots:r={},$$scope:o}=e;return t.$$set=l=>{"$$scope"in l&&n(0,o=l.$$scope)},[o,r]}class Ie extends U{constructor(e){super(),M(this,e,Un,Mn,P,{})}}function Vn(t){let e,n,r,o,l;return{c(){e=h("button"),e.textContent="Reset",n=E(),r=h("button"),r.textContent="Submit",p(e,"type","button"),p(e,"class","btn-base"),p(r,"class","btn-base"),p(r,"type","submit")},m(s,i){g(s,e,i),g(s,n,i),g(s,r,i),o||(l=G(e,"click",X.reset),o=!0)},p:j,d(s){s&&(b(e),b(n),b(r)),o=!1,l()}}}function Gn(t){let e,n,r,o;return e=new Ue({props:{fields:t[1],data:t[2],formErrors:t[0],disabled:!1}}),r=new re({props:{$$slots:{default:[Vn]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment),n=E(),D(r.$$.fragment)},m(l,s){I(e,l,s),g(l,n,s),I(r,l,s),o=!0},p(l,s){const i={};s&1&&(i.formErrors=l[0]),e.$set(i);const a={};s&32&&(a.$$scope={dirty:s,ctx:l}),r.$set(a)},i(l){o||($(e.$$.fragment,l),$(r.$$.fragment,l),o=!0)},o(l){w(e.$$.fragment,l),w(r.$$.fragment,l),o=!1},d(l){l&&b(n),q(e,l),q(r,l)}}}function Kn(t){let e,n,r,o,l;return n=new Ie({props:{$$slots:{default:[Gn]},$$scope:{ctx:t}}}),{c(){e=h("form"),D(n.$$.fragment)},m(s,i){g(s,e,i),I(n,e,null),r=!0,o||(l=G(e,"submit",Ae(t[3])),o=!0)},p(s,i){const a={};i&33&&(a.$$scope={dirty:i,ctx:s}),n.$set(a)},i(s){r||($(n.$$.fragment,s),r=!0)},o(s){w(n.$$.fragment,s),r=!1},d(s){s&&b(e),q(n),o=!1,l()}}}function Hn(t){let e,n,r;return n=new Ce({props:{label:"Login",$$slots:{default:[Kn]},$$scope:{ctx:t}}}),{c(){e=h("div"),D(n.$$.fragment),p(e,"class","w-full max-w-xs m-auto")},m(o,l){g(o,e,l),I(n,e,null),r=!0},p(o,[l]){const s={};l&33&&(s.$$scope={dirty:l,ctx:o}),n.$set(s)},i(o){r||($(n.$$.fragment,o),r=!0)},o(o){w(n.$$.fragment,o),r=!1},d(o){o&&b(e),q(n)}}}function Jn(t,e,n){const r=[{id:"password",component:"text",type:"password",label:"Password",validators:[{validator:"required"}]}],o={password:""};let{formErrors:l,formValidate:s}=Me(r);return[l,r,o,async a=>{const c=new FormData(a.target);if(!s(c)){n(0,l);return}try{await X.login(Z(c.get("password")))}catch{n(0,l=l.set("password","Unable to login!"))}}]}class Wn extends U{constructor(e){super(),M(this,e,Jn,Hn,P,{})}}const St=t=>{const e={};return t.forEach(n=>e[n.id]=n.value),e};function xn(t){let e;return{c(){e=h("button"),e.textContent="Submit",p(e,"class","btn-base"),p(e,"type","submit")},m(n,r){g(n,e,r)},p:j,d(n){n&&b(e)}}}function Xn(t){let e,n,r,o;return e=new Ue({props:{fields:t[1],data:t[2],formErrors:t[0],disabled:!1}}),r=new re({props:{$$slots:{default:[xn]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment),n=E(),D(r.$$.fragment)},m(l,s){I(e,l,s),g(l,n,s),I(r,l,s),o=!0},p(l,s){const i={};s&1&&(i.formErrors=l[0]),e.$set(i);const a={};s&32&&(a.$$scope={dirty:s,ctx:l}),r.$set(a)},i(l){o||($(e.$$.fragment,l),$(r.$$.fragment,l),o=!0)},o(l){w(e.$$.fragment,l),w(r.$$.fragment,l),o=!1},d(l){l&&b(n),q(e,l),q(r,l)}}}function Yn(t){let e,n,r,o,l;return n=new Ie({props:{$$slots:{default:[Xn]},$$scope:{ctx:t}}}),{c(){e=h("form"),D(n.$$.fragment)},m(s,i){g(s,e,i),I(n,e,null),r=!0,o||(l=G(e,"submit",Ae(t[3])),o=!0)},p(s,i){const a={};i&33&&(a.$$scope={dirty:i,ctx:s}),n.$set(a)},i(s){r||($(n.$$.fragment,s),r=!0)},o(s){w(n.$$.fragment,s),r=!1},d(s){s&&b(e),q(n),o=!1,l()}}}function zn(t){let e,n,r;return n=new Ce({props:{label:"Login",$$slots:{default:[Yn]},$$scope:{ctx:t}}}),{c(){e=h("div"),D(n.$$.fragment),p(e,"class","w-full max-w-xs m-auto")},m(o,l){g(o,e,l),I(n,e,null),r=!0},p(o,[l]){const s={};l&33&&(s.$$scope={dirty:l,ctx:o}),n.$set(s)},i(o){r||($(n.$$.fragment,o),r=!0)},o(o){w(n.$$.fragment,o),r=!1},d(o){o&&b(e),q(n)}}}function Qn(t,e,n){const r=[{id:"owner",label:"Repository Owner",component:"text",value:"",validators:[{validator:"required"}]},{id:"name",label:"Repository Name",component:"text",value:"",validators:[{validator:"required"}]},{id:"branch",label:"Branch",component:"text",value:"main",validators:[{validator:"required"}]},{id:"prefix",label:"Prefix",component:"text",value:"",validators:[]},{id:"token",label:"Token",component:"text",type:"password",value:"",validators:[{validator:"required"}]},{id:"password",label:"Password",component:"text",type:"password",value:"",validators:[{validator:"required"},{validator:"min",props:{min:5}},{validator:"max",props:{max:15}}]},{id:"confirm",label:"Confirm",component:"text",type:"password",value:"",validators:[{validator:"required"},{validator:"fieldEquals",props:{field:"password",msg:"Password do not match!"}}]}],o=St(r);let{formErrors:l,formValidate:s}=Me(r);return[l,r,o,a=>{const c=new FormData(a.target);if(!s(c)){n(0,l);return}X.saveRepoConfig({owner:Z(c.get("owner")),name:Z(c.get("name")),branch:Z(c.get("branch")),prefix:Z(c.get("prefix")),token:Z(c.get("token"))},Z(c.get("password"))),en("/")}]}class Zn extends U{constructor(e){super(),M(this,e,Qn,zn,P,{})}}function er(t){let e;const n=t[2].default,r=fe(n,t,t[1],null);return{c(){r&&r.c()},m(o,l){r&&r.m(o,l),e=!0},p(o,l){r&&r.p&&(!e||l&2)&&me(r,n,o,o[1],e?de(n,o[1],l,null):pe(o[1]),null)},i(o){e||($(r,o),e=!0)},o(o){w(r,o),e=!1},d(o){r&&r.d(o)}}}function tr(t){let e,n,r,o,l,s;return l=new Wn({}),{c(){e=h("div"),n=h("div"),r=h("h1"),r.textContent="Tiny CMS",o=E(),D(l.$$.fragment),p(r,"class","text-2xl font-bold mb-6"),p(n,"class","m-auto px-16 py-20 bg-gray-50"),p(e,"class","flex h-screen")},m(i,a){g(i,e,a),m(e,n),m(n,r),m(n,o),I(l,n,null),s=!0},p:j,i(i){s||($(l.$$.fragment,i),s=!0)},o(i){w(l.$$.fragment,i),s=!1},d(i){i&&b(e),q(l)}}}function nr(t){let e,n,r,o,l,s;return l=new Zn({}),{c(){e=h("div"),n=h("div"),r=h("h1"),r.textContent="Tiny CMS",o=E(),D(l.$$.fragment),p(r,"class","text-2xl font-bold mb-6"),p(n,"class","m-auto px-16 py-20 bg-gray-50"),p(e,"class","flex h-screen")},m(i,a){g(i,e,a),m(e,n),m(n,r),m(n,o),I(l,n,null),s=!0},p:j,i(i){s||($(l.$$.fragment,i),s=!0)},o(i){w(l.$$.fragment,i),s=!1},d(i){i&&b(e),q(l)}}}function rr(t){let e,n,r,o;const l=[nr,tr,er],s=[];function i(a,c){return a[0].name?a[0].token?2:1:0}return e=i(t),n=s[e]=l[e](t),{c(){n.c(),r=Y()},m(a,c){s[e].m(a,c),g(a,r,c),o=!0},p(a,[c]){let u=e;e=i(a),e===u?s[e].p(a,c):(H(),w(s[u],1,1,()=>{s[u]=null}),J(),n=s[e],n?n.p(a,c):(n=s[e]=l[e](a),n.c()),$(n,1),n.m(r.parentNode,r))},i(a){o||($(n),o=!0)},o(a){w(n),o=!1},d(a){a&&b(r),s[e].d(a)}}}function or(t,e,n){let r;te(t,X,s=>n(0,r=s));let{$$slots:o={},$$scope:l}=e;return Ee(()=>{X.initRepoConfig()}),t.$$set=s=>{"$$scope"in s&&n(1,l=s.$$scope)},[r,l,o]}class lr extends U{constructor(e){super(),M(this,e,or,rr,P,{})}}function sr(t){let e;return{c(){e=h("div"),e.innerHTML='<h1>Home</h1> <div class="max-w-xs m-auto">Home</div>'},m(n,r){g(n,e,r)},p:j,i:j,o:j,d(n){n&&b(e)}}}class ir extends U{constructor(e){super(),M(this,e,null,sr,P,{})}}function ar(t){let e,n,r;return{c(){e=h("h4"),e.textContent="Commit:",n=E(),r=h("p"),r.textContent=`${t[1]}`},m(o,l){g(o,e,l),g(o,n,l),g(o,r,l)},p:j,d(o){o&&(b(e),b(n),b(r))}}}function cr(t){let e,n,r,o,l,s,i,a,c=t[0].owner+"",u,f,d,y,_=t[0].name+"",v,N,B,R,A=t[0].token+"",k,C,S=t[1]&&ar(t);return{c(){e=h("div"),n=h("h1"),n.textContent="About",r=E(),o=h("div"),l=h("h1"),l.textContent="Main",s=E(),i=h("p"),a=F("owner: "),u=F(c),f=E(),d=h("p"),y=F("Name: "),v=F(_),N=E(),B=h("p"),R=F("Token: "),k=F(A),C=E(),S&&S.c(),p(o,"class","bg-slate-200")},m(T,L){g(T,e,L),m(e,n),m(e,r),m(e,o),m(o,l),m(o,s),m(o,i),m(i,a),m(i,u),m(o,f),m(o,d),m(d,y),m(d,v),m(o,N),m(o,B),m(B,R),m(B,k),m(e,C),S&&S.m(e,null)},p(T,[L]){L&1&&c!==(c=T[0].owner+"")&&V(u,c),L&1&&_!==(_=T[0].name+"")&&V(v,_),L&1&&A!==(A=T[0].token+"")&&V(k,A),T[1]&&S.p(T,L)},i:j,o:j,d(T){T&&b(e),S&&S.d()}}}function ur(t,e,n){let r;return te(t,X,l=>n(0,r=l)),[r,void 0]}class fr extends U{constructor(e){super(),M(this,e,ur,cr,P,{})}}function dr(t){let e;return{c(){e=h("div"),e.innerHTML="<h1>Not Found</h1>"},m(n,r){g(n,e,r)},p:j,i:j,o:j,d(n){n&&b(e)}}}class mr extends U{constructor(e){super(),M(this,e,null,dr,P,{})}}function nt(t,e,n){const r=t.slice();return r[1]=e[n],r}function rt(t){let e,n,r=t[1].label+"",o,l;return{c(){e=h("li"),n=h("a"),o=F(r),p(n,"href",l=t[1].path),p(e,"class","py-4 px-4 border-b w-full hover:bg-gray-100 hover:text-gray-900 active:bg-gray-100 tc-transition")},m(s,i){g(s,e,i),m(e,n),m(n,o)},p(s,i){i&1&&r!==(r=s[1].label+"")&&V(o,r),i&1&&l!==(l=s[1].path)&&p(n,"href",l)},d(s){s&&b(e)}}}function pr(t){let e,n,r,o,l,s,i,a,c,u=x(t[0]),f=[];for(let d=0;d<u.length;d+=1)f[d]=rt(nt(t,u,d));return{c(){e=h("nav"),n=h("h1"),n.textContent="Tiny CMS",r=E(),o=h("ul");for(let d=0;d<f.length;d+=1)f[d].c();l=E(),s=h("li"),i=h("a"),i.textContent="Logout",p(n,"class","text-2xl font-bold bg-blue-600 text-white py-6 pr-4"),p(i,"href","#/"),p(s,"class","py-4 px-4 border-b w-full hover:bg-gray-100 hover:text-gray-900 active:bg-gray-100 tc-transition"),p(o,"class","flex flex-col items-end"),p(e,"class","col-span-1 text-end bg-gray-50")},m(d,y){g(d,e,y),m(e,n),m(e,r),m(e,o);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(o,null);m(o,l),m(o,s),m(s,i),a||(c=G(i,"click",X.logout),a=!0)},p(d,[y]){if(y&1){u=x(d[0]);let _;for(_=0;_<u.length;_+=1){const v=nt(d,u,_);f[_]?f[_].p(v,y):(f[_]=rt(v),f[_].c(),f[_].m(o,l))}for(;_<f.length;_+=1)f[_].d(1);f.length=u.length}},i:j,o:j,d(d){d&&b(e),ge(f,d),a=!1,c()}}}function hr(t,e,n){let{entries:r=[]}=e;return t.$$set=o=>{"entries"in o&&n(0,r=o.entries)},[r]}class _r extends U{constructor(e){super(),M(this,e,hr,pr,P,{entries:0})}}const K=Se(""),we="cache@",Ve=t=>{sessionStorage.setItem(we+t.path,JSON.stringify(t))},Ct=(t,e)=>{const n=sessionStorage.getItem(we+t);if(!n)return;const r=JSON.parse(n);if(e!==r.oid){sessionStorage.removeItem(we+t);return}return r},br=t=>{sessionStorage.removeItem(we+t)},It=t=>(t.prefix?t.prefix.concat("/"):"").concat("definitions"),gr=(t,e)=>It(t).concat("/",e,".json"),qt=(t,e)=>(t.prefix?t.prefix.concat("/"):"").concat("collections","/",e),Ge=(t,e,n)=>qt(t,e).concat("/",n,".json"),$r="https://api.github.com/graphql",oe=async(t,e)=>{const n={method:"POST",headers:{authorization:`bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(e)},r=await fetch($r,n);if(!r.ok)throw new Error(`Response: ${r.status} - ${r.statusText}`);const o=await r.json();if(o.errors){const l=o.errors.map(s=>s.message);throw new Error(l.join(", "))}return o},wr=(t,e)=>{const n=[];n.push(`
    query getFile($owner: String!, $name: String!) {
        repository(owner: $owner, name: $name) {
    `);let r=0;return e.forEach(o=>{n.push(`
        _${r++}: object(expression: "${t.branch}:${o}") {
            ... on Blob {
              text
              oid
            }
          }
        `)}),n.push(`
        }
    }
    `),{query:n.join(),variables:{owner:t.owner,name:t.name}}},yr=async(t,e)=>{const r=(await oe(t.token,wr(t,e))).data.repository,o=[];for(const[l,s]of Object.entries(r)){const i=e[parseInt(l.substring(1))],a=s;a.path=i,o.push(a)}if(e.length!==o.length)throw new Error(`Expected: ${e.length} current: ${o.length}`);return o},vr=`
query Listing($owner: String!, $name: String!, $path: String!) {
    repository(owner: $owner, name: $name) {
      object(expression: $path) {
        ... on Tree {
          entries {
            name
            type
            oid
          }
        }
      }
    }
  }
    `,kr=(t,e)=>({query:vr,variables:{owner:t.owner,name:t.name,path:`${t.branch}:${e}`}}),Er=async(t,e)=>(await oe(t.token,kr(t,e))).data.repository.object.entries,Sr=(t,e)=>{const n=new Map,r=[];for(const o of e){const l=t.concat("/",o.name),s=Ct(l,o.oid);s?n.set(o.oid,s.text):r.push(l)}return{cached:n,uncached:r}},Dt=async(t,e)=>{const n=await Er(t,e),{cached:r,uncached:o}=Sr(e,n);console.log("listing:",n,"uncached:",o,"cached:",r),o.length>0&&(await yr(t,o)).forEach(i=>{Ve(i),r.set(i.oid,i.text)});const l=[];for(const s of n){let i=r.get(s.oid);if(!i)throw new Error(`Listing for: ${e} file not found: ${s.name}`);l.push(JSON.parse(i))}return l},Cr=async(t,e)=>{if(!e)throw new Error("getCollectionListing - Insufficient parameter");const n=qt(t,e);return Dt(t,n)},Ir=async t=>{const e=It(t);return Dt(t,e)},qr=`
query getCommit($owner: String!, $name: String!, $branch: String!) {
  repository(owner: $owner, name: $name) {
    ref(qualifiedName: $branch) {
      target {
        ... on Commit {
          history(first: 1) {
            nodes {
              oid
            }
          }
        }
      }
    }
  }
}    
`,Dr=(t,e)=>({query:e,variables:{owner:t.owner,name:t.name,branch:t.branch}}),Or=t=>t.ref.target.history.nodes[0].oid,Br=async t=>{const e=await oe(t.token,Dr(t,qr));return Or(e.data.repository)},Ot=async t=>Br(t),Rr=`
mutation ($committableBranch: CommittableBranch!, $path: String!, $oid: GitObjectID!) {
  createCommitOnBranch(
    input: {
      branch: $committableBranch, 
      message: {
        headline: "Delete file"
      }, 
      fileChanges: {
        deletions: [
          {
            path: $path
          }
        ]
      }, 
      expectedHeadOid: $oid
    }
  ) {
    commit {
      oid
    }
  }
}   
`,Nr=(t,e,n)=>({query:Rr,variables:{committableBranch:{repositoryNameWithOwner:`${t.owner}/${t.name}`,branchName:t.branch},path:e,oid:n}}),Fr=t=>t.createCommitOnBranch.commit.oid,jr=async(t,e,n)=>{const r=await oe(t.token,Nr(t,e,n));return Fr(r.data)},Ar=`
query getFile($owner: String!, $name: String!, $branch: String!, $exp: String!) {
    repository(owner: $owner, name: $name) {
      object(expression: $exp) {
        ... on Blob {
          oid
        }
      }
      ref(qualifiedName: $branch) {
        target {
          ... on Commit {
            history(first: 1) {
              nodes {
                oid
              }
            }
          }
        }
      }
    }
  }    
`,Lr=`
query getFile($owner: String!, $name: String!, $branch: String!, $exp: String!) {
    repository(owner: $owner, name: $name) {
      object(expression: $exp) {
        ... on Blob {
          text
          oid
        }
      }
      ref(qualifiedName: $branch) {
        target {
          ... on Commit {
            history(first: 1) {
              nodes {
                oid
              }
            }
          }
        }
      }
    }
  }    
`,Bt=(t,e,n)=>({query:e,variables:{owner:t.owner,name:t.name,branch:t.branch,exp:`${t.branch}:${n}`}}),Rt=t=>t.ref.target.history.nodes[0].oid,Nt=t=>t.object.oid,Tr=t=>t.object.text,Pr=async(t,e)=>{const r=(await oe(t.token,Bt(t,Ar,e))).data.repository;return{path:e,oid:Nt(r),commit:Rt(r)}},Mr=async(t,e)=>{const r=(await oe(t.token,Bt(t,Lr,e))).data.repository;return{data:{path:e,oid:Nt(r),text:Tr(r)},commit:Rt(r)}},Ur=`
mutation ($committableBranch: CommittableBranch!, $path: String!, $content: Base64String!, $oid: GitObjectID!) {
    createCommitOnBranch (input: {
        branch : $committableBranch
        message: {
            headline: "Update file content"
        }
        fileChanges: {
            additions: [{
                path: $path
                contents: $content
            }]
        }
        expectedHeadOid: $oid
    }) {
        commit {
            oid
            file (path:$path) {
              oid
            }
        }
    }
}
`,Vr=(t,e,n,r)=>({query:Ur,variables:{committableBranch:{repositoryNameWithOwner:`${t.owner}/${t.name}`,branchName:t.branch},path:e,content:r,oid:n}}),Gr=t=>t.createCommitOnBranch.commit.oid,Kr=t=>t.createCommitOnBranch.commit.file.oid,Hr=async(t,e,n,r)=>{r.tc_modified=new Date().getTime();const o=JSON.stringify(r),l=await oe(t.token,Vr(t,e,n,btoa(o)));return{commit:Gr(l.data),data:{path:e,oid:Kr(l.data),text:o}}},Ft=async(t,e)=>{const n=await Pr(t,e),r=Ct(e,n.oid);if(r)return{data:JSON.parse(r.text),commit:n.commit};const o=await Mr(t,e);return Ve(o.data),{data:JSON.parse(o.data.text),commit:o.commit}},Jr=async(t,e,n)=>{if(!e||!n)throw new Error("getItemFile - Insufficient parameter");const r=Ge(t,e,n);return Ft(t,r)},Wr=async(t,e)=>{if(!e)throw new Error("getDefinitionFile - Insufficient parameter");const n=gr(t,e);return Ft(t,n)},xr=async(t,e,n,r,o)=>{if(!e||!n||!r||!o)throw new Error("updateItemFile - Insufficient parameter");const l=Ge(t,e,n),s=await Hr(t,l,r,o);return Ve(s.data),{commit:s.commit,data:JSON.parse(s.data.text)}},Xr=async(t,e,n,r)=>{if(!e||!n||!r)throw new Error("deleteItemFile - Insufficient parameter");const o=Ge(t,e,n),l=await jr(t,o,r);return br(o),l};function Yr(t){let e,n,r;const o=t[1].default,l=fe(o,t,t[0],null);return{c(){e=h("div"),n=h("div"),l&&l.c(),p(n,"class","relative top-1/3 mx-auto max-w-md bg-white rounded-md shadow-xl p-6"),p(e,"class","fixed z-50 inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full")},m(s,i){g(s,e,i),m(e,n),l&&l.m(n,null),r=!0},p(s,[i]){l&&l.p&&(!r||i&1)&&me(l,o,s,s[0],r?de(o,s[0],i,null):pe(s[0]),null)},i(s){r||($(l,s),r=!0)},o(s){w(l,s),r=!1},d(s){s&&b(e),l&&l.d(s)}}}function zr(t,e,n){let{$$slots:r={},$$scope:o}=e;return t.$$set=l=>{"$$scope"in l&&n(0,o=l.$$scope)},[o,r]}class Qr extends U{constructor(e){super(),M(this,e,zr,Yr,P,{})}}function ot(t,e,n){const r=t.slice();return r[4]=e[n],r}function lt(t){let e,n=t[4].label+"",r,o,l;return{c(){e=h("button"),r=F(n),p(e,"class","btn-base")},m(s,i){g(s,e,i),m(e,r),o||(l=G(e,"click",function(){ve(t[4].onclick)&&t[4].onclick.apply(this,arguments)}),o=!0)},p(s,i){t=s,i&4&&n!==(n=t[4].label+"")&&V(r,n)},d(s){s&&b(e),o=!1,l()}}}function Zr(t){let e,n=x(t[2]),r=[];for(let o=0;o<n.length;o+=1)r[o]=lt(ot(t,n,o));return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=Y()},m(o,l){for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(o,l);g(o,e,l)},p(o,l){if(l&4){n=x(o[2]);let s;for(s=0;s<n.length;s+=1){const i=ot(o,n,s);r[s]?r[s].p(i,l):(r[s]=lt(i),r[s].c(),r[s].m(e.parentNode,e))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(o){o&&b(e),ge(r,o)}}}function eo(t){let e,n,r,o,l,s,i,a,c,u;return c=new re({props:{$$slots:{default:[Zr]},$$scope:{ctx:t}}}),{c(){e=h("div"),n=F(t[0]),o=E(),l=h("div"),s=F(t[1]),i=E(),a=h("div"),D(c.$$.fragment),p(e,"class",r="text-lg pb-2 border-b "+(t[3]==="error"?"text-red-900":"")),p(l,"class","my-6")},m(f,d){g(f,e,d),m(e,n),g(f,o,d),g(f,l,d),m(l,s),g(f,i,d),g(f,a,d),I(c,a,null),u=!0},p(f,d){(!u||d&1)&&V(n,f[0]),(!u||d&8&&r!==(r="text-lg pb-2 border-b "+(f[3]==="error"?"text-red-900":"")))&&p(e,"class",r),(!u||d&2)&&V(s,f[1]);const y={};d&132&&(y.$$scope={dirty:d,ctx:f}),c.$set(y)},i(f){u||($(c.$$.fragment,f),u=!0)},o(f){w(c.$$.fragment,f),u=!1},d(f){f&&(b(e),b(o),b(l),b(i),b(a)),q(c)}}}function to(t){let e,n;return e=new Qr({props:{$$slots:{default:[eo]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},m(r,o){I(e,r,o),n=!0},p(r,[o]){const l={};o&143&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function no(t,e,n){let{title:r}=e,{desc:o}=e,{buttons:l}=e,{type:s="ok"}=e;return t.$$set=i=>{"title"in i&&n(0,r=i.title),"desc"in i&&n(1,o=i.desc),"buttons"in i&&n(2,l=i.buttons),"type"in i&&n(3,s=i.type)},[r,o,l,s]}class jt extends U{constructor(e){super(),M(this,e,no,to,P,{title:0,desc:1,buttons:2,type:3})}}function st(t,e,n){const r=t.slice();return r[11]=e[n],r}function ro(t){let e,n,r,o,l;function s(){return t[4](t[11])}function i(){return t[5](t[11])}return{c(){e=h("button"),e.textContent="Show",n=E(),r=h("button"),r.textContent="Delete",p(e,"class","btn-base"),p(r,"class","btn-base")},m(a,c){g(a,e,c),g(a,n,c),g(a,r,c),o||(l=[G(e,"click",s),G(r,"click",i)],o=!0)},p(a,c){t=a},d(a){a&&(b(e),b(n),b(r)),o=!1,ne(l)}}}function it(t){let e,n,r=t[11].tc_id+"",o,l,s,i=t[11].tc_title+"",a,c,u,f=new Date(t[11].tc_modified).toLocaleDateString()+"",d,y,_,v,N,B;return v=new re({props:{$$slots:{default:[ro]},$$scope:{ctx:t}}}),{c(){e=h("tr"),n=h("td"),o=F(r),l=E(),s=h("td"),a=F(i),c=E(),u=h("td"),d=F(f),y=E(),_=h("td"),D(v.$$.fragment),N=E(),p(n,"class","tb-cell"),p(s,"class","tb-cell"),p(u,"class","tb-cell"),p(_,"class","tb-cell"),p(e,"class","tb-row")},m(R,A){g(R,e,A),m(e,n),m(n,o),m(e,l),m(e,s),m(s,a),m(e,c),m(e,u),m(u,d),m(e,y),m(e,_),I(v,_,null),m(e,N),B=!0},p(R,A){(!B||A&4)&&r!==(r=R[11].tc_id+"")&&V(o,r),(!B||A&4)&&i!==(i=R[11].tc_title+"")&&V(a,i),(!B||A&4)&&f!==(f=new Date(R[11].tc_modified).toLocaleDateString()+"")&&V(d,f);const k={};A&16391&&(k.$$scope={dirty:A,ctx:R}),v.$set(k)},i(R){B||($(v.$$.fragment,R),B=!0)},o(R){w(v.$$.fragment,R),B=!1},d(R){R&&b(e),q(v)}}}function oo(t){let e,n,r;return{c(){e=h("button"),e.textContent="Create",p(e,"class","btn-base")},m(o,l){g(o,e,l),n||(r=G(e,"click",t[6]),n=!0)},p:j,d(o){o&&b(e),n=!1,r()}}}function lo(t){let e,n,r,o,l,s,i=x(t[2]),a=[];for(let u=0;u<i.length;u+=1)a[u]=it(st(t,i,u));const c=u=>w(a[u],1,1,()=>{a[u]=null});return l=new re({props:{$$slots:{default:[oo]},$$scope:{ctx:t}}}),{c(){e=h("table"),n=h("tr"),n.innerHTML='<th class="tb-cell">ID</th> <th class="tb-cell">Title</th> <th class="tb-cell">Modified</th> <th class="tb-cell"></th>',r=E();for(let u=0;u<a.length;u+=1)a[u].c();o=E(),D(l.$$.fragment),p(n,"class","tb-head"),p(e,"class","shadow w-full")},m(u,f){g(u,e,f),m(e,n),m(e,r);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(e,null);g(u,o,f),I(l,u,f),s=!0},p(u,f){if(f&7){i=x(u[2]);let y;for(y=0;y<i.length;y+=1){const _=st(u,i,y);a[y]?(a[y].p(_,f),$(a[y],1)):(a[y]=it(_),a[y].c(),$(a[y],1),a[y].m(e,null))}for(H(),y=i.length;y<a.length;y+=1)c(y);J()}const d={};f&16385&&(d.$$scope={dirty:f,ctx:u}),l.$set(d)},i(u){if(!s){for(let f=0;f<i.length;f+=1)$(a[f]);$(l.$$.fragment,u),s=!0}},o(u){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)w(a[f]);w(l.$$.fragment,u),s=!1},d(u){u&&(b(e),b(o)),ge(a,u),q(l,u)}}}function at(t){let e,n;return e=new jt({props:{title:"Delete Item",desc:"Do you want to delete item: '"+t[1].tc_title+"'",buttons:[{label:"Close",onclick:t[7]},{label:"Delete",onclick:t[8]}]}}),{c(){D(e.$$.fragment)},m(r,o){I(e,r,o),n=!0},p(r,o){const l={};o&2&&(l.desc="Do you want to delete item: '"+r[1].tc_title+"'"),o&2&&(l.buttons=[{label:"Close",onclick:r[7]},{label:"Delete",onclick:r[8]}]),e.$set(l)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function so(t){let e,n,r=t[0].collection+"",o,l,s,i,a,c;s=new Ie({props:{$$slots:{default:[lo]},$$scope:{ctx:t}}});let u=t[1]&&at(t);return{c(){e=h("h3"),n=F("Collection "),o=F(r),l=E(),D(s.$$.fragment),i=E(),u&&u.c(),a=Y(),p(e,"class","text-xl pb-6")},m(f,d){g(f,e,d),m(e,n),m(e,o),g(f,l,d),I(s,f,d),g(f,i,d),u&&u.m(f,d),g(f,a,d),c=!0},p(f,[d]){(!c||d&1)&&r!==(r=f[0].collection+"")&&V(o,r);const y={};d&16391&&(y.$$scope={dirty:d,ctx:f}),s.$set(y),f[1]?u?(u.p(f,d),d&2&&$(u,1)):(u=at(f),u.c(),$(u,1),u.m(a.parentNode,a)):u&&(H(),w(u,1,1,()=>{u=null}),J())},i(f){c||($(s.$$.fragment,f),$(u),c=!0)},o(f){w(s.$$.fragment,f),w(u),c=!1},d(f){f&&(b(e),b(l),b(i),b(a)),q(s,f),u&&u.d(f)}}}function io(t,e,n){let r;te(t,X,_=>n(9,r=_));let{params:o={collection:""}}=e,l=null,s=[];const i=async _=>{try{n(2,s=await Cr(r,_))}catch(v){K.set(z(v))}},a=async _=>{try{const v=await Ot(r),N=await Xr(r,o.collection,_,v);i(o.collection)}catch(v){K.set(z(v))}};Ee(async()=>{i(o.collection)});const c=_=>be(`#/collection/${o.collection}/item/${_.tc_id}`),u=_=>n(1,l=_),f=()=>be(`#/collection/${o.collection}/create`),d=()=>{n(1,l=null)},y=async()=>{l&&(await a(l.tc_id),n(1,l=null))};return t.$$set=_=>{"params"in _&&n(0,o=_.params)},[o,l,s,a,c,u,f,d,y]}class ao extends U{constructor(e){super(),M(this,e,io,so,P,{params:0})}}function ct(t,e,n){const r=t.slice();return r[4]=e[n],r}function co(t){let e,n,r;function o(){return t[1](t[4])}return{c(){e=h("button"),e.textContent="Show",p(e,"class","btn-base")},m(l,s){g(l,e,s),n||(r=G(e,"click",o),n=!0)},p(l,s){t=l},d(l){l&&b(e),n=!1,r()}}}function ut(t){let e,n,r=t[4].tc_id+"",o,l,s,i=t[4].tc_title+"",a,c,u,f=new Date(t[4].tc_modified).toLocaleDateString()+"",d,y,_,v,N,B;return v=new re({props:{$$slots:{default:[co]},$$scope:{ctx:t}}}),{c(){e=h("tr"),n=h("td"),o=F(r),l=E(),s=h("td"),a=F(i),c=E(),u=h("td"),d=F(f),y=E(),_=h("td"),D(v.$$.fragment),N=E(),p(n,"class","tb-cell"),p(s,"class","tb-cell"),p(u,"class","tb-cell"),p(_,"class","tb-cell"),p(e,"class","tb-row")},m(R,A){g(R,e,A),m(e,n),m(n,o),m(e,l),m(e,s),m(s,a),m(e,c),m(e,u),m(u,d),m(e,y),m(e,_),I(v,_,null),m(e,N),B=!0},p(R,A){(!B||A&1)&&r!==(r=R[4].tc_id+"")&&V(o,r),(!B||A&1)&&i!==(i=R[4].tc_title+"")&&V(a,i),(!B||A&1)&&f!==(f=new Date(R[4].tc_modified).toLocaleDateString()+"")&&V(d,f);const k={};A&129&&(k.$$scope={dirty:A,ctx:R}),v.$set(k)},i(R){B||($(v.$$.fragment,R),B=!0)},o(R){w(v.$$.fragment,R),B=!1},d(R){R&&b(e),q(v)}}}function uo(t){let e,n,r,o,l=x(t[0]),s=[];for(let a=0;a<l.length;a+=1)s[a]=ut(ct(t,l,a));const i=a=>w(s[a],1,1,()=>{s[a]=null});return{c(){e=h("table"),n=h("tr"),n.innerHTML='<th class="tb-cell">ID</th> <th class="tb-cell">Title</th> <th class="tb-cell">Modified</th> <th class="tb-cell"></th>',r=E();for(let a=0;a<s.length;a+=1)s[a].c();p(n,"class","tb-head"),p(e,"class","bg-white shadow w-full")},m(a,c){g(a,e,c),m(e,n),m(e,r);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);o=!0},p(a,c){if(c&1){l=x(a[0]);let u;for(u=0;u<l.length;u+=1){const f=ct(a,l,u);s[u]?(s[u].p(f,c),$(s[u],1)):(s[u]=ut(f),s[u].c(),$(s[u],1),s[u].m(e,null))}for(H(),u=l.length;u<s.length;u+=1)i(u);J()}},i(a){if(!o){for(let c=0;c<l.length;c+=1)$(s[c]);o=!0}},o(a){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)w(s[c]);o=!1},d(a){a&&b(e),ge(s,a)}}}function fo(t){let e,n;return e=new Ce({props:{label:"Definitions",$$slots:{default:[uo]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},m(r,o){I(e,r,o),n=!0},p(r,[o]){const l={};o&129&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function mo(t,e,n){let r;te(t,X,i=>n(2,r=i));let o=[];const l=async()=>{try{n(0,o=await Ir(r))}catch(i){K.set(z(i))}};return Ee(async()=>{l()}),[o,i=>be("#/collection/"+i.tc_id)]}class po extends U{constructor(e){super(),M(this,e,mo,fo,P,{})}}const ho=(t,e,n)=>{t&&(n.tc_id=e.tc_id),n.tc_title=e.tc_title;for(const r in e.data)n[r]=e.data[r];return n},_o=(t,e,n,r)=>(e&&(t.tc_id=ze(n,"tc_id","No id")),t.tc_title=ze(n,"tc_title","No title"),r.forEach(o=>{t.data[o.id]=n.get(o.id)}),t);function ft(t){let e,n;return e=new Ce({props:{label:`Collection: ${t[2].tc_title} Item: ${t[3].tc_title}`,$$slots:{default:[vo]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment)},m(r,o){I(e,r,o),n=!0},p(r,o){const l={};o&12&&(l.label=`Collection: ${r[2].tc_title} Item: ${r[3].tc_title}`),o&4194555&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function bo(t){let e,n,r,o=new Date(t[3].tc_modified).toLocaleString()+"",l,s,i,a,c=t[4].substring(0,7)+"",u,f,d,y,_=t[3].tc_id+"",v;return{c(){e=h("div"),n=h("div"),r=F("Modifield: "),l=F(o),s=E(),i=h("div"),a=F("Commit: "),u=F(c),f=E(),d=h("h3"),y=F("ID: "),v=F(_),p(e,"class","text-sm text-right text-gray-500 pb-4"),p(d,"class","pb-4")},m(N,B){g(N,e,B),m(e,n),m(n,r),m(n,l),m(e,s),m(e,i),m(i,a),m(i,u),g(N,f,B),g(N,d,B),m(d,y),m(d,v)},p(N,B){B&8&&o!==(o=new Date(N[3].tc_modified).toLocaleString()+"")&&V(l,o),B&16&&c!==(c=N[4].substring(0,7)+"")&&V(u,c),B&8&&_!==(_=N[3].tc_id+"")&&V(v,_)},d(N){N&&(b(e),b(f),b(d))}}}function go(t){let e,n,r,o,l;return{c(){e=h("button"),e.textContent="Submit",n=E(),r=h("button"),r.textContent="Cancel",p(e,"class","btn-base"),p(e,"type","submit"),p(r,"class","btn-base"),p(r,"type","button")},m(s,i){g(s,e,i),g(s,n,i),g(s,r,i),o||(l=G(r,"click",t[11]),o=!0)},p:j,d(s){s&&(b(e),b(n),b(r)),o=!1,l()}}}function $o(t){let e,n,r;return{c(){e=h("button"),e.textContent="Edit",p(e,"class","btn-base"),p(e,"type","button")},m(o,l){g(o,e,l),n||(r=G(e,"click",t[10]),n=!0)},p:j,d(o){o&&b(e),n=!1,r()}}}function wo(t){let e,n,r,o;function l(a,c){return a[1]?$o:go}let s=l(t),i=s(t);return{c(){i.c(),e=E(),n=h("button"),n.textContent="Collection",p(n,"class","btn-base"),p(n,"type","button")},m(a,c){i.m(a,c),g(a,e,c),g(a,n,c),r||(o=G(n,"click",t[12]),r=!0)},p(a,c){s===(s=l(a))&&i?i.p(a,c):(i.d(1),i=s(a),i&&(i.c(),i.m(e.parentNode,e)))},d(a){a&&(b(e),b(n)),i.d(a),r=!1,o()}}}function yo(t){let e,n,r,o;return e=new Ue({props:{fields:t[5],data:t[7],formErrors:t[6],disabled:t[1]}}),r=new re({props:{$$slots:{default:[wo]},$$scope:{ctx:t}}}),{c(){D(e.$$.fragment),n=E(),D(r.$$.fragment)},m(l,s){I(e,l,s),g(l,n,s),I(r,l,s),o=!0},p(l,s){const i={};s&32&&(i.fields=l[5]),s&128&&(i.data=l[7]),s&64&&(i.formErrors=l[6]),s&2&&(i.disabled=l[1]),e.$set(i);const a={};s&4194307&&(a.$$scope={dirty:s,ctx:l}),r.$set(a)},i(l){o||($(e.$$.fragment,l),$(r.$$.fragment,l),o=!0)},o(l){w(e.$$.fragment,l),w(r.$$.fragment,l),o=!1},d(l){l&&b(n),q(e,l),q(r,l)}}}function vo(t){let e,n,r,o,l,s,i=!t[8]&&bo(t);return r=new Ie({props:{$$slots:{default:[yo]},$$scope:{ctx:t}}}),{c(){e=h("form"),i&&i.c(),n=E(),D(r.$$.fragment)},m(a,c){g(a,e,c),i&&i.m(e,null),m(e,n),I(r,e,null),o=!0,l||(s=G(e,"submit",Ae(t[9])),l=!0)},p(a,c){a[8]||i.p(a,c);const u={};c&4194531&&(u.$$scope={dirty:c,ctx:a}),r.$set(u)},i(a){o||($(r.$$.fragment,a),o=!0)},o(a){w(r.$$.fragment,a),o=!1},d(a){a&&b(e),i&&i.d(),q(r),l=!1,s()}}}function ko(t){let e,n,r=t[3]&&t[2]&&ft(t);return{c(){r&&r.c(),e=Y()},m(o,l){r&&r.m(o,l),g(o,e,l),n=!0},p(o,[l]){o[3]&&o[2]?r?(r.p(o,l),l&12&&$(r,1)):(r=ft(o),r.c(),$(r,1),r.m(e.parentNode,e)):r&&(H(),w(r,1,1,()=>{r=null}),J())},i(o){n||($(r),n=!0)},o(o){w(r),n=!1},d(o){o&&b(e),r&&r.d(o)}}}function Eo(t,e,n){let r,o;te(t,X,O=>n(13,r=O)),te(t,Zt,O=>n(14,o=O));let{params:l={collection:"",item:""}}=e,s=o.endsWith(`/collection/${l.collection}/create`),i=!s,a,c,u,f=[];s&&f.push({id:"tc_id",component:"text",label:"Id",validators:[{validator:"required"},{validator:"max",props:{max:32}}]}),f.push({id:"tc_title",component:"text",label:"Title",validators:[{validator:"required"},{validator:"max",props:{max:32}}]});let{formErrors:d,formValidate:y,formFieldsUpdate:_}=Me(),v={};const N=async O=>{try{const W=await xr(r,l.collection,O.tc_id,u,O);return n(4,u=W.commit),n(3,c=W.data),!0}catch(W){K.set(z(W))}return!1},B=async O=>{try{const W=new FormData(O.target);if(!wn(f,W,v)){K.set("The item did not changed!");return}if(!y(W)){n(6,d);return}const At=_o(c,s,W,a.fields);if(!await N(At))return;if(s){be(`#/collection/${l.collection}`);return}n(1,i=!0)}catch(W){K.set(z(W))}},R=O=>{n(3,c={tc_id:"",tc_title:"",tc_modified:0,data:St(O.fields)})},A=async()=>{try{const O=await Jr(r,l.collection,l.item);n(4,u=O.commit),n(3,c=O.data)}catch(O){K.set(z(O))}},k=async()=>{try{const O=await Wr(r,l.collection);n(2,a=O.data)}catch(O){K.set(z(O))}},C=async()=>{try{n(4,u=await Ot(r))}catch(O){K.set(z(O))}};Ee(async()=>{await k(),s?(R(a),await C()):await A(),n(5,f=_(f.concat(a.fields))),n(7,v=ho(s,c,v))});const S=()=>n(1,i=!1),T=()=>n(1,i=!0),L=()=>be(`#/collection/${l.collection}`);return t.$$set=O=>{"params"in O&&n(0,l=O.params)},[l,i,a,c,u,f,d,v,s,B,S,T,L]}class dt extends U{constructor(e){super(),M(this,e,Eo,ko,P,{params:0})}}function mt(t){let e,n;return e=new jt({props:{title:"Errors",desc:t[0],buttons:t[3],type:"error"}}),{c(){D(e.$$.fragment)},m(r,o){I(e,r,o),n=!0},p(r,o){const l={};o&1&&(l.desc=r[0]),e.$set(l)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function So(t){let e,n,r,o,l,s,i,a;n=new _r({props:{entries:t[2]}});let c=t[0]!==""&&mt(t);return i=new rn({props:{routes:t[1]}}),{c(){e=h("div"),D(n.$$.fragment),r=E(),o=h("div"),l=h("div"),c&&c.c(),s=E(),D(i.$$.fragment),p(l,"class","w-full"),p(o,"class","col-span-4 p-8 h-screen"),p(e,"class","grid grid-cols-5")},m(u,f){g(u,e,f),I(n,e,null),m(e,r),m(e,o),m(o,l),c&&c.m(l,null),m(l,s),I(i,l,null),a=!0},p(u,f){u[0]!==""?c?(c.p(u,f),f&1&&$(c,1)):(c=mt(u),c.c(),$(c,1),c.m(l,s)):c&&(H(),w(c,1,1,()=>{c=null}),J())},i(u){a||($(n.$$.fragment,u),$(c),$(i.$$.fragment,u),a=!0)},o(u){w(n.$$.fragment,u),w(c),w(i.$$.fragment,u),a=!1},d(u){u&&b(e),q(n),c&&c.d(),q(i)}}}function Co(t){let e,n,r;return n=new lr({props:{$$slots:{default:[So]},$$scope:{ctx:t}}}),{c(){e=h("main"),D(n.$$.fragment),p(e,"class","text-gray-600 max-w-screen-xl m-auto")},m(o,l){g(o,e,l),I(n,e,null),r=!0},p(o,[l]){const s={};l&17&&(s.$$scope={dirty:l,ctx:o}),n.$set(s)},i(o){r||($(n.$$.fragment,o),r=!0)},o(o){w(n.$$.fragment,o),r=!1},d(o){o&&b(e),q(n)}}}function Io(t,e,n){let r;return te(t,K,i=>n(0,r=i)),[r,{"/":ir,"/about":fr,"/definitions":po,"/collection/:collection":ao,"/collection/:collection/create":dt,"/collection/:collection/item/:item":dt,"*":mr},[{label:"Home",path:"#/"},{label:"About",path:"#/about"},{label:"Definitions",path:"#/definitions"}],[{label:"OK",onclick:()=>{K.set("")}}]]}class qo extends U{constructor(e){super(),M(this,e,Io,Co,P,{})}}new qo({target:document.getElementById("app")||document.body});
